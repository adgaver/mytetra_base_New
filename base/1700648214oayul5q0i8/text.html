<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-weight:400; font-style:normal; "  bgcolor="#ffffff">
Version:0.9
StartHTML:0000000157
EndHTML:0000110262
StartFragment:0000000193
EndFragment:0000110226
SourceURL:https://tokmakov.msk.ru/articles/item/19
<html>
<body>
<!--StartFragment--><h1 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 25px; font-family: Arial, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;">Урок 5. Повторение совпадений</h1><div id="article-item" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(50, 50, 50); font-family: Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><div style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; overflow: hidden;"><p style="margin: 0px; padding: 0px; max-height: 1e+06px; font-size: 12px; color: rgb(150, 150, 150); width: 485px; float: left;">29.03.2018</p><p style="margin: 0px; padding: 0px; max-height: 1e+06px; font-size: 12px; color: rgb(150, 150, 150); width: 485px; float: right; text-align: right;">Категория:<span> </span><a href="https://tokmakov.msk.ru/articles/category/15" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); text-decoration: none; font-size: 12px;">Регулярные выражения</a></p></div><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">В предыдущих уроках вы узнали, как найти совпадение с конкретными символами, используя разнообразные мета символы и специальные наборы-классы. В этом уроке вы научитесь находить совпадения с несколькими повторе ниями шаблона, представляющего собой символ и набор символов.</p><h2 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 21px;">Сколько совпадений?</h2><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Вы изучили все основные способы сопоставления с шаблоном (т.е. с регулярным выражением), но во всех примерах чувствовалось одно очень серьезное ограничение. Изученными средствами было бы очень сложно записать регулярное выражение, соответствующее адресу электронной почты. Вот основной формат адреса электронной почты:</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">text@text.text<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Используя метасимволы, изученные в предыдущем уроке, можно создать следующее регулярное выражение:</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">\w@\w\.\w<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Метасимвол<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w</code><span> </span>соответствует всем алфавитно-цифровым символам (плюс символ подчеркивания, который является допустимым в адресе электронной почты). В отличие от точки<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>символ<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">@</code><span> </span>защищать не нужно.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Это — совершенно правильное регулярное выражение, хотя и довольно бесполезное. Оно соответствует адресу электронной почты вроде<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">a@b.c</code><span> </span>(который, хотя и является синтаксически правильным, очевидно, не может быть правильным (допустимым) адресом на практике). Проблема в том, что<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w</code><span> </span>соответствует одному отдельному символу, а вы не можете заранее знать, сколько символов предшествует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">@</code>. Приведенные ниже адреса электронной почты являются правильными (допустимыми), но они все имеют разное число символов перед<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">@</code>:</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">b@forta.com </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">ben@forta.com </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">bforta@forta.com<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Нужен способ установить соответствие с несколькими символами, и это делается с помощью одного из нескольких специальных метасимволов.</p><h3 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 17px;">Соответствие с одним или несколькими символами</h3><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы установить соответствие символа (или набора) шаблона с одним или несколькими символами, просто добавьте в конец шаблона символ<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code>. Символ<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>устанавливает соответствие с одним или несколькими символами (по крайней мере с одним символом; с нулем символов он соответствие не устанавливает). Принимая во внимание, что<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">a</code><span> </span>соответствует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">a</code>, выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">a+</code><span> </span>соответствует одному или нескольким вхождениям a. Точно так же, учитывая, что диапазон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[0-9]</code><span> </span>соответствует любой цифре,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[0-9]+</code><span> </span>соответствует последовательности, состоящей из одной или нескольких цифр.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">Когда<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>означает повторение набора,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>должен быть помещен вне набора. Поэтому выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[0-9]+</code><span> </span>является правильным и ему может соответствовать непустая последовательность цифр, тогда как выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[0-9+]</code>, хотя и является синтаксически правильным, имеет совсем другое назначение. На самом деле<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[0-9+]</code><span> </span>— правильное (допустимое) регулярное выражение, но ему не будет соответствовать последовательность длиной более одной цифры. Это выражение определяет набор от<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">0</code><span> </span>до<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">9</code><span> </span>и символ<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code>; поэтому ему будут соответствовать любая единственная цифра или знак "плюс". Хотя это выражение синтаксически правильно, означает оно совсем не то, что<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[0-9]+</code>.</div><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Давайте повторно рассмотрим пример с адресами электронной почты, на сей раз используя<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code>, чтобы установить соответствие с одним или несколькими символами:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Send personal email to ben@forta.com. For questions about </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">a book use support@forta.com. Feel free to send unsolicited </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">email to spam@forta.com (wouldn't it be nice if it were </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">that simple, huh?).<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">\w+@\w+\.\w+<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Send personal email to <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">ben@forta.com</span>. For questions about </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">a book use <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">support@forta.com</span>. Feel free to send unsolicited </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">email to <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">spam@forta.com</span> (wouldn't it be nice if it were </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">that simple, huh?).<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Шаблон в точности соответствует всем трем адресам. Регулярное выражение с помощью<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w+</code><span> </span>сначала находит один или несколько алфавитно-цифровых символов. Затем устанавливается соответствие с<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">@</code>, после чего снова используется<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w+</code>, чтобы установить соответствие с одним или несколькими символами, следующими за<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">@</code>. Затем устанавливается соответствие с точкой<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>(используется защищенная точка<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\.</code>) и еще один шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w+</code>, чтобы установить соответствие с концом адреса.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;"><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>— метасимвол. Чтобы найти<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code>, его надо защитить, т.е. задать как<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\+</code>.</div><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Плюс<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>может также использоваться для того, чтобы установить соответствие с одним или несколькими наборами символов. Чтобы продемонстрировать это, в следующем примере применяется то же самое регулярное выражение, но текст немного отличается:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Send personal email to ben@forta.com or ben.forta@forta.com.   </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">For questions about a book use support@forta.com.  If your </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">message is urgent try ben@urgent.forta.com. Feel free to   </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">send unsolicited email to spam@forta.com (wouldn't it be nice  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">if it were that simple, huh?).<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">\w+@\w+\.\w+<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Send personal email to <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">ben@forta.com</span> or ben.<span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">forta@forta.com</span>.   </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">For questions about a book use <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">support@forta.com</span>.  If your </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">message is urgent try <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">ben@urgent.forta</span>.com. Feel free to   </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">send unsolicited email to <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">spam@forta.com</span> (wouldn't it be nice  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">if it were that simple, huh?).<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение соответствовало пяти адресам, но два из них охвачены не полностью. Почему так получилось? Потому что в<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w+@\w+\.\w+</code><span> </span>ничего не предусмотрено для символов<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>перед<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">@</code>, и потому это выражение допускает только одну точку<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code>, отделяющую две строки после<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">@</code>. Хотя<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">ben.forta@forta.com</code><span> </span>— совершенно законный адрес электронной почты, регулярное выражение найдет только<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">forta</code><span> </span>(вместо<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">ben.forta</code>), потому что<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w</code><span> </span>соответствует алфавитно-цифровым символам, но не точке<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>в середине строки текста.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Здесь нужно установить соответствие с<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w</code><span> </span>или точкой<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code>, т.е. с набором<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\w\.]</code>. Ниже приведен тот же пример с пересмотренным шаблоном:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Send personal email to ben@forta.com or ben.forta@forta.com.   </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">For questions about a book use support@forta.com.  If your </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">message is urgent try ben@urgent.forta.com. Feel free to   </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">send unsolicited email to spam@forta.com (wouldn't it be nice  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">if it were that simple, huh?).<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">[\w.]+@[\w.]+\.\w+<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Send personal email to <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">ben@forta.com</span> or <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">ben.forta@forta.com</span>.   </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">For questions about a book use <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">support@forta.com</span>.  If your </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">message is urgent try <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">ben@urgent.forta.com</span>. Feel free to   </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">send unsolicited email to <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">spam@forta.com</span> (wouldn't it be nice  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">if it were that simple, huh?).<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Этим, казалось бы, мы достигли цели. Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\w.]+</code><span> </span>соответствует одному или нескольким вхождениям любого алфавитно-цифрового символа, символа подчеркивания и точки<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code>, и потому вхождение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">ben.forta</code><span> </span>будет найдено. Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\w.]+</code><span> </span>также используется для строки после<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">@</code>, так что будут установлены соответствия с именами (названиями) более глубоких доменов (или с именем (названием) главного компьютера).</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Обратите внимание, что для заключительного соответствия использовалось выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w+</code>, а не<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\w.]+</code>. Попытайтесь объяснить, почему? Используйте<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\w.]</code><span> </span>в качестве заключительного шаблона и выясните, что случится со вторым, третьим и четвертым совпадением.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">Обратите внимание, что точка<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>в наборе не защищена, и все равно она каким-то образом соответствует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>(она была обработана как буквальный символ, а не как метасимвол). Вообще, метасимволы типа<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>рассматриваются как буквальный текст, когда используются в наборах, и поэтому защищать их не нужно. Однако если защитить их, это не причинит вреда. Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\w.]</code><span> </span>функционально эквивалентно<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\w\.]</code>.</div><h3 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 17px;">Поиск нуля или большего количества символов</h3><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Плюс<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>соответствует вхождению одного или нескольких символов. С отсутствующими символами (т.е. с нулевым количеством символов) соответствие установлено не будет, потому что должен быть по крайней мере один символ. Иными словами, в случае использования метасимвола<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>для установления соответствия необходимо не менее одного символа. Но что же делать, если нужно установить соответствие с необязательными символами, т.е. с такими символами, которые могут отсутствовать вообще (иными словами, с символами, количество которых может равняться нулю)?</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы сделать это, используйте метасимвол<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code>. Метасимвол<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code><span> </span>используется в точности так, как<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code>; он записывается сразу после символа или набора и будет соответствовать нулю или большему количеству вхождений символа или шаблона. Поэтому шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187); background-color: rgb(238, 238, 238);">В.* Forta</code><span> </span>соответствует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187); background-color: rgb(238, 238, 238);">B Forta</code>,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187); background-color: rgb(238, 238, 238);">B. Forta</code>,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187); background-color: rgb(238, 238, 238);">Ben Forta</code><span> </span>и, конечно же, и другим комбинациям.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы продемонстрировать использование<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code>, рассмотрим измененную версию примера с адресами электронной почты:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Hello .ben@forta.com is my email address.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">[\w.]+@[\w.]+\.\w+<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Hello <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">.ben@forta.com</span> is my email address.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Вспомните, что<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\w.]+</code><span> </span>соответствует одному или нескольким вхождениям алфавитно-цифровых символов и точки<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code>, и потому вхождение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.ben</code><span> </span>было найдено. Однако в предыдущем тексте, очевидно, есть опечатка (лишняя точка в середине текста), но сейчас это к делу не относится. Гораздо большая проблема состоит в том, что хотя точка<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>является допустимым символом в адресе электронной почты, с нее не может начинаться адрес электронной почты, т.е. она не является допустимым символом в начале адреса электронной почты.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Другими словами, необходимо установить соответствие с алфавитно-цифровым текстом, который может содержать необязательные дополнительные символы. Вот пример:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Hello .ben@forta.com is my email address.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">\w+[\w.]*@[\w.]+\.\w+<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Hello .<span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">ben@forta.com</span> is my email address.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Этот шаблон выглядит довольно сложным (но фактически он таким не является). Давайте рассмотрим его вместе. Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w+</code><span> </span>соответствует любому алфавитно-цифровому символу, но не точке<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>(иными словами, он соответствует всем допустимым символам, с которых может начинаться адрес электронной почты). После начальных допустимых символов действительно может следовать точка<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>и дополнительные символы, хотя фактически они могут и не присутствовать. Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\w.]*</code><span> </span>соответствует нулю или большему количеству вхождений точки<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>или алфавитно-цифровых символов, а именно это нам и было необходимо.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">Помните о том, что метасимвол<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code><span> </span>всегда относится к некоторому шаблону и делает этот шаблон необязательным. В отличие от<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code>, который требует не менее одного соответствия,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code><span> </span>соответствует любому количеству совпадений, если они встретятся, но не требует ни одного совпадения в обязательном порядке.</div><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;"><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code><span> </span>является метасимволом. Чтобы установить соответствие со звездочкой<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code><span> </span>как с обычным символом, ее нужно защитить, т.е. задать как<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\*</code>.</div><h3 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 17px;">Соответствие с нулем вхождений или с вхождением одного символа</h3><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Есть еще один очень полезный метасимвол —<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>(знак вопроса). Подобно<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code>, знак вопроса<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>отмечает необязательный текст (так что ему будет соответствовать и нулевое количество вхождений шаблона). Но в отличие от знака<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>знак вопроса<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>соответствует только отсутствию вхождений или одному вхождению символа (или набора), но не более чем одному вхождению. Поэтому знак<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>очень полезен тогда, когда нужно установить соответствие с одним конкретным необязательным символом в блоке текста.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Рассмотрим следующий пример:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The URL is http://www.forta.com/, to connect  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">securely use https://www.forta.com/ instead.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">http://[\w./]+<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The URL is <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">http://www.forta.com/</span>, to connect  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">securely use https://www.forta.com/ instead.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы найти URL, используется шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">http://</code><span> </span>(который является буквальным текстом и поэтому соответствует только себе); за ним следует шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\w./]+</code>, соответствующий одному или нескольким вхождениям набора, в котором допускаются алфавитно-цифровые символы, точка<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code><span> </span>и косая черта<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">/</code>. Этот шаблон может найти только первый URL (тот, который начинается с<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">http://</code>), но не второй, который начинается с<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">https://</code>. Причем<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">s*</code><span> </span>(нуль или больше вхождений<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">s</code>) не является правильным шаблоном, потому что ему соответствовало бы и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">httpsssss://</code><span> </span>(что явно не допустимо).</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Решение? Используйте<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">s?</code><span> </span>как показано в следующем примере:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The URL is http://www.forta.com/, to connect  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">securely use https://www.forta.com/ instead.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">https?://[\w./]+<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The URL is <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">http://www.forta.com/</span>, to connect  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">securely use <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">https://www.forta.com/</span> instead.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Шаблон здесь начинается с<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">https?://</code>. Метасимвол<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>указывает, что с предшествующим ему в шаблоне символом (<code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">s</code>) должно быть установлено соответствие, если в тексте этого символа нет или если есть одно вхождение этого символа в текст. Другими словами,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">https?://</code><span> </span>соответствует и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">http://</code>, и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">https://</code><span> </span>(но ничему иному).</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Кстати, использование метасимвола<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>решает также проблему, рассмотренную в предыдущем уроке. Вспомните пример, в котором использовался шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\r\n</code>, чтобы установить соответствие с концом строки, и я упоминал, что в Unix и Linux нужно использовать<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\n</code><span> </span>(без<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\r</code>) и что идеальное решение состояло бы в том, чтобы установить соответствие с необязательным<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\r</code>, за которым следует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\n</code>. Рассмотрим этот пример снова, но на сей раз немного изменим регулярное выражение:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">"101","Ben","Forta" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">"102","Jim","James"</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">"103","Roberta","Robertson"</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">"104","Bob","Bobson"<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">[\r]?\n[\r]?\n<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">"101","Ben","Forta" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">"102","Jim","James"<span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);"> </span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);"> </span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">"103","Roberta","Robertson"</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">"104","Bob","Bobson"<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\r]?\n</code><span> </span>соответствует одному необязательному вхождению<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\r</code>, за которым обязательно следует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\n</code>.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">Обратите внимание, что здесь использовано регулярное выражение<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\r]?</code>, а не<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\r?</code>. Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\r]</code><span> </span>определяет набор, содержащий единственный метасимвол, т.е. одноэлементный набор, поэтому<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[\r]?</code><span> </span>фактически функционально идентично<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\r?</code>. Квадратные скобки<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[ ]</code><span> </span>обычно используются, чтобы определить набор символов, но некоторые разработчики любят заключать в них даже единственный символ, чтобы предотвратить всякую двусмысленность (выделив шаблон, к которому применяется следующий метасимвол). Если вы используете и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[ ]</code>, и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code>, удостоверьтесь, что<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>поместили вне набора. В соответствии с этими правилами правильно писать<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">http[s]?://</code>, a не<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">http[s?]://</code>.</div><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">Знак вопроса<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>является метасимволом. Чтобы найти<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code>, нужно защитить его, т.е. задать как<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\?</code>.</div><h2 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 21px;">Использование интервалов</h2><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Метасимволы<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code>,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>помогают решить много проблем с регулярными выражениями, но иногда этих знаков недостаточно. Учтите следующее:</p><ul style="margin: 15px 0px 15px 35px; padding: 0px; max-height: 1e+06px;"><li style="margin: 0px; padding: 0px; max-height: 1e+06px;"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code><span> </span>соответствуют неограниченному числу символов. Они не дают возможности установить максимальное число символов, которым может соответствовать предшествующий им шаблон;</li><li style="margin: 0px; padding: 0px; max-height: 1e+06px;">минимальное количество вхождений, указываемое с помощью<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code>,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code>, равно нулю или единице. Эти метасимволы не позволяют установить минимальное количество совпадений явно;</li><li style="margin: 0px; padding: 0px; max-height: 1e+06px;">нет способа определить точно количество желаемых совпадений.</li></ul><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы решить эти проблемы и обеспечивать большую свободу управления повторением совпадений, в регулярных выражениях допускается использование интервалов. Интервалы определяются между символами<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">}</code>.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">Фигурные скобки<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">}</code><span> </span>— метасимволы и поэтому их нужно защитить с помощью<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\</code>, если необходимо использовать их как буквальный текст. Впрочем, стоит отметить, что многие реализации регулярных выражений способны правильно обработать<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">}</code>, даже если они не защищены (поскольку способны определить, когда эти символы используются буквально, а когда они метасимволы). Однако лучше всего не полагаться на это, а защищать эти символы, когда они используются как литералы.</div><h3 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 17px;">Указание точного количества совпадений</h3><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы определить точное количество совпадений, число совпадений указывают между фигурными скобками<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">}</code>. Поэтому<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{3}</code><span> </span>означает поиск соответствий с тремя экземплярами предыдущего символа или набора. Если есть только 2 вхождения шаблона, соответствие установлено не будет.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы продемонстрировать это, давайте повторно рассмотрим пример с RGB-значениями (использованный в уроках 3, «Соответствие набору символов», и 4, «Использование метасимволов»). Как вы помните, RGB-значения определяются как три набора шестнадцатеричных чисел (причем каждый набор состоит из 2 символов). Первый шаблон для поиска RGB-значения имел следующий вид:</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">#[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">В уроке 4, «Использование метасимволов», мы имели дело с классом POSIX и шаблон выглядел так:</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">#[[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:] ][[ixdigit:]][[:xdigit:]]<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;"></p>Проблема с обоими шаблонами состоит в том, что приходится повторять один и тот же набор символов (или класс) шесть раз. Теперь в том же самом примере используем интервал для установления соответствия:<p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;"></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;BODY BGCOLOR="#336633" TEXT="#FFFFFF" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">      MARGINWIDTH="0" MARGINHEIGHT="0"</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">      TOPMARGIN="0" LEFTMARGIN="0"&gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">#[[:xdigit:]]{6}<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;BODY BGCOLOR="<span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">#336633</span>" TEXT="<span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">#FFFFFF</span>" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">      MARGINWIDTH="0" MARGINHEIGHT="0"</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">      TOPMARGIN="0" LEFTMARGIN="0"&gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[:xdigit:]</code><span> </span>соответствует шестнадцатеричному символу, а<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{6}</code><span> </span>повторяет класс POSIX шесть раз. Повторение работает точно так же в выражении</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">#[0-9A-Fa-f]{6}<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><h3 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 17px;">Установление соответствия в случае интервала-диапазона</h3><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы определить диапазон количества вхождений (от минимального до максимального значения количества вхождений шаблона), могут использоваться также интервалы. Диапазоны определяются, например, так:<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{2,4}</code>. (Этот диапазон задает<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">2</code><span> </span>в качестве минимального значения для количества вхождений шаблона и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">4</code><span> </span>— в качестве максимального значения для количества вхождений шаблона). Пример применения диапазона — регулярное выражение, используемое для проверки правильности формата дат:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">4/8/03 </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">10-6-2004 </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">2/2/2 </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">01-01-01<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">\d{l,2}[-\/]\d{l,2}[-\/]\d{2,4}<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">4/8/03</span> </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">10-6-2004</span> </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">2/2/2 </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">01-01-01</span><span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Перечисленные здесь даты — значения, которые пользователи могут вводить в качестве значений полей в формах; эти значения должны представлять собой правильно отформатированные даты. Шаблону<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\d{l,2}</code><span> </span>соответствует одна или две цифры (такая проверка используется для дня и месяца);<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\d{2,4}</code><span> </span>соответствует году;<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[-\/]</code><span> </span>соответствует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">-</code><span> </span>или<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">/</code><span> </span>в качестве разделителя даты. Использованный шаблон нашел три даты, но не нашел<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">2/2/2</code><span> </span>(потому что для года последовательность цифр слишком короткая).</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">В использованном здесь регулярном выражении наклонная черта<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">/</code><span> </span>защищена и потому записана как<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\/</code>. Во многих реализациях регулярных выражений защита не нужна, но некоторые синтаксические анализаторы регулярных выражений действительно требуют этого. Поэтому рекомендуется всегда защищать наклонную черту<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">/</code>.</div><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Обратите внимание, что предыдущий шаблон не проверяет правильность дат (недопустимые даты типа<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">54/67/9999</code><span> </span>выдержали бы испытание) — он только проверяет правильность формата (шаг, обычно предпринимаемый непосредственно перед проверкой правильности дат).</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">Интервалы могут начинаться с<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">0</code>. Интервал<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{0,3}</code><span> </span>соответствует нулю, одному, двум или трем вхождениям шаблона. Как отмечалось ранее, знак вопроса<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>находит нуль совпадений или одно совпадение для шаблона, который предшествует этому знаку. Поэтому знак вопроса<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>функционально эквивалентен интервалу<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{0,1}</code>.</div><h3 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 17px;">Соответствие в случае интервала типа «не менее»</h3><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Интервалы используются также для того, чтобы определить минимальное количество совпадений с шаблоном, не указывая при этом максимального. Синтаксис для этого типа интервала подобен синтаксису для диапазона, но в нем опущен максимум. Например,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{3,}</code><span> </span>означает совпадение не менее чем с<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">3</code><span> </span>вхождениями. Иными словами, здесь требуется<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">3</code><span> </span>или больше совпадений.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Следующий пример охватывает большую часть того, что было изучено в этом уроке. Здесь регулярное выражение используется для того, чтобы определить местонахождение всех заказов, оцененных в<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">100</code><span> </span>или больше долларов (<code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">$</code>):</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1001: $496.80</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1002: $1290.69</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1003: $26.43</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1004: $613.42</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1005: $7.61</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1006: $414.90</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1007: $25.00<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">\d+: \$\d{3,}\.\d{2}<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">1001: $496.80</span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">1002: $1290.69</span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1003: $26.43</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">1004: $613.42</span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1005:    $7.61</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">1006: $414.90</span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1007: $25.00<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Предыдущий текст — сообщение, где указаны номера заказов, за которыми следует стоимость соответствующего заказа. Регулярное выражение сначала использует шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\d+:</code>, чтобы найти порядковый номер заказа (если этот шаблон опустить, то, когда будет найдена стоимость, соответствие будет установлено только с ней, а не со всей строкой, включающей также и порядковый номер заказа). Чтобы установить соответствие со стоимостью, используется шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\$\d{3,}\.\d{2}</code>. Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\$</code><span> </span>соответствует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">$</code>,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\d{3,}</code><span> </span>соответствует числам, содержащим не менее трех цифр (и таким образом стоимости не менее<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">100$</code>),<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\.</code><span> </span>соответствует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code>, и, наконец,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\d{2}</code><span> </span>соответствует тем двум цифрам, которые следуют после десятичной точки. Весь шаблон правильно устанавливает соответствие с четырьмя из семи заказов.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">Будьте внимательны при использовании этой формы интервала. Если опустить запятую<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">,</code>, то поиск будет происходить иначе: будет попытка установить соответствие с тем количеством вхождений шаблона, которое указано в фигурных скобках.</div><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">Знак<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>функционально эквивалентен<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{1,}</code>.</div><h2 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 21px;">Предотвращение лишних соответствий</h2><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Метасимвол<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>ограничивает количество совпадений — их может быть нуль или только одно. То же самое относится и к совпадениям, задаваемым интервалами, если в них указаны точные количества совпадений или диапазоны. Однако другие формы повторения шаблона, описанные в этом уроке, могут соответствовать неограниченному количеству совпадений — иногда их слишком много.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Все примеры к настоящему моменту были тщательно отобраны так, чтобы не столкнуться со слишком большим количеством соответствий. Но теперь пришло время рассмотреть следующий пример. Выбранный для примера текст является частью Web-страницы и содержит текст со встроенными HTML-тегами<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;B&gt;</code>. Регулярное выражение должно найти любой текст внутри тегов<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;B&gt;</code><span> </span>(это может потребоваться при замене форматирования). Вот пример:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">This offer is not available to customers living in &lt;B&gt;AK&lt;/B&gt; and &lt;B&gt;HI&lt;/B&gt;.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;[Bb]&gt;.*&lt;/[Bb]&gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">This offer is not available to customers living in <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">&lt;B&gt;AK&lt;/B&gt; and &lt;B&gt;HI&lt;/B&gt;</span>.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;[Bb]&gt;</code><span> </span>соответствует открывающему тегу<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;B&gt;</code><span> </span>(на верхнем или нижнем регистре), а<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);"></code>соответствует закрывающему тегу<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;/B&gt;</code><span> </span>(также на верхнем или нижнем регистре). Однако вместо двух совпадений было найдено только одно, причем<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.*</code><span> </span>соответствовало всему, что было расположено после первого<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;B&gt;</code><span> </span>до последнего тега<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;/B&gt;</code>, так что фактически был найден текст<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">AK&lt;/B&gt; and &lt;B&gt;HI</code>. Найденный текст содержит текст, который нужно было найти, но помимо него он включает также и другие вхождения тегов.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Причина этого состоит в том, что метасимволы типа<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>являются<span> </span><em style="margin: 0px; padding: 0px; max-height: 1e+06px;">жадными</em>; т.е. они ищут самое длинное возможное соответствие, а не наименьшее. Из-за этого кажется, что соответствие начинается не с начала, а с конца текста и продолжается назад (т.е. в направлении к началу), пока не будет найдено следующее соответствие. Это делается преднамеренно — кванторы по природе своей жадны.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Но что, если вам не нужно жадное соответствие? Решение состоит в том, чтобы использовать ленивые версии этих кванторов (они называются ленивыми, потому что устанавливают соответствие с наименьшим (а не наибольшим) возможным количеством символов). Ленивые кванторы определяются путем добавления в конец<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>к используемому квантору, причем для каждого из жадных кванторов имеется ленивый эквивалент (табл. 5.1).</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;"><strong style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 0); font-weight: 500; text-shadow: rgb(204, 204, 204) 1px 1px 1px;">Таблица 5.1.</strong><span> </span>Жадные и ленивые кванторы</p><table class="data-table" style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; border-collapse: collapse;"><tbody style="margin: 0px; padding: 0px; max-height: 1e+06px;"><tr style="margin: 0px; padding: 0px; max-height: 1e+06px;"><th style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50); background-color: rgb(240, 240, 240); font-weight: normal; text-align: left;">Жадный</th><th style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50); background-color: rgb(240, 240, 240); font-weight: normal; text-align: left;">Ленивый</th></tr><tr style="margin: 0px; padding: 0px; max-height: 1e+06px;"><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code></td><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*?</code></td></tr><tr style="margin: 0px; padding: 0px; max-height: 1e+06px;"><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code></td><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+?</code></td></tr><tr style="margin: 0px; padding: 0px; max-height: 1e+06px;"><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code></td><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">??</code></td></tr><tr style="margin: 0px; padding: 0px; max-height: 1e+06px;"><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{n}</code></td><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{n}?</code></td></tr><tr style="margin: 0px; padding: 0px; max-height: 1e+06px;"><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{n,}</code></td><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{n,}?</code></td></tr><tr style="margin: 0px; padding: 0px; max-height: 1e+06px;"><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{n,m}</code></td><td style="margin: 0px; padding: 5px; max-height: 1e+06px; vertical-align: top; border: 1px solid rgb(209, 209, 209); color: rgb(50, 50, 50);"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">{n,m}?</code></td></tr></tbody></table><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Квантор<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*?</code><span> </span>— ленивая версия<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code>, так что давайте повторно рассмотрим наш пример, на сей раз используя<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*?</code>:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">This offer is not available to customers living in &lt;B&gt;AK&lt;/B&gt; and &lt;B&gt;HI&lt;/B&gt;.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;[Bb]&gt;.*?&lt;/[Bb]&gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">This offer is not available to customers living in <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">&lt;B&gt;AK&lt;/B&gt;</span> and <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">&lt;B&gt;HI&lt;/B&gt;</span>.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Используя ленивый квантор<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*?</code>, мы добились правильного результата. Первый раз с ним было сопоставлено только вхождение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;B&gt;AK&lt;/B&gt;</code>, и совершенно независимо от него было найдено вхождение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;B&gt;HI&lt;/B&gt;</code>.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;">В большинстве примеров в этой книге для простоты используются жадные кванторы. Однако не стесняйтесь применять ленивые кванторы, если именно они вам необходимы.</div><h2 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 21px;">Резюме</h2><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Реальная мощь шаблонов из регулярных выражений становится очевидной именно при использовании повторения совпадений. В этом уроке введены кванторы<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">+</code><span> </span>(соответствует одному или большему количеству совпадений),<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">*</code><span> </span>(нуль или больше совпадений),<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?</code><span> </span>(нуль или одно совпадение). Эти кванторы можно рассматривать как способы найти повторяющиеся совпадения. Для более тонкого управления могут использоваться интервалы, так как они позволяют определить точное количество повторений или же минимальное и максимальное их количество. Жадные кванторы могут найти слишком много соответствий; чтобы избежать этого, используйте ленивые кванторы.</p></div><!--EndFragment-->
</body>
</html></body></html>