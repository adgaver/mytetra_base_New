<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:xx-large; font-weight:600; color:#e3e3e3;">Расширения Chrome</span></p>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;"># =============================================================================</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#c586c0;">from</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#4ec9b0;">playwright</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">.</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#4ec9b0;">sync_api</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#c586c0;">import</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#dcdcaa;">sync_playwright</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">, </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#4ec9b0;">Playwright</span></pre>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"><br /></p>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">path_to_extension</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#d4d4d4;">=</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">rf</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;">&quot;C:\Users\</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">{</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">user</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">}</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;">\AppData\Local\Google\Chrome\User Data\Default\Extensions\</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ff0000;">ПАПКА РАСШИРЕНИЯ</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;">&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">user_data_dir</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#d4d4d4;">=</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">     </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">rf</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;">'C:\Users\</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">{</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">user</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">}</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;">\AppData\Local\Google\Chrome\User Data\Default'</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">def</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#dcdcaa;">run</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">(</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">playwright</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">: </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#4ec9b0;">Playwright</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">):</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;"># https://playwright.dev/python/docs/chrome-extensions</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">context</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#d4d4d4;">=</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">playwright</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">.</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">chromium</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">.</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#dcdcaa;">launch_persistent_context</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">(</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">        </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">user_data_dir</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">        </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">headless</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#d4d4d4;">=</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">False</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">        </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;"># viewport={&quot;width&quot;: 1280, &quot;height&quot;: 720}, </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">        </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;"># viewport={&quot;width&quot;: 1920, &quot;height&quot;: 1080}, </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">        </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">args</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#d4d4d4;">=</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">[</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">            </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">f</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;">&quot;--disable-extensions-except=</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">{</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">path_to_extension</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">}</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;">&quot;</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">            </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">f</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;">&quot;--load-extension=</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">{</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">path_to_extension</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">}</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;">&quot;</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">            </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#ce9178;">&quot;--start-maximized&quot;</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">        ], </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">no_viewport</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#d4d4d4;">=</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#569cd6;">True</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    )</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;"># if len(context.background_pages) == 0:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;">#     background_page = context.wait_for_event('backgroundpage')</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;"># else:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;">#     background_page = context.background_pages[0]</span></pre>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"><br /></p>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">page</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#d4d4d4;">=</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">context</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">.</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">pages</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">[</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#b5cea8;">0</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">]</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">page</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">.</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#dcdcaa;">goto</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">(</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">url</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">page</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">.</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#dcdcaa;">pause</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;"># ...</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;"># ...</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">context</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">.</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#dcdcaa;">close</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#c586c0;">with</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#dcdcaa;">sync_playwright</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">() </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#c586c0;">as</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;"> </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">playwright</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">    </span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#dcdcaa;">run</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">(</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#9cdcfe;">playwright</span><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#cccccc;">)    </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Consolas,Courier New,monospace'; font-size:14px; color:#6a9955;"># =============================================================================</span></pre>
<p style="-qt-paragraph-type:empty; margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:x-large; font-weight:600; text-decoration: underline; color:#000000;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="introduction"></a><a href="https://playwright.dev/python/docs/chrome-extensions#introduction"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:x-large; font-weight:600; text-decoration: underline; color:#000000;">В</span></a><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:x-large; font-weight:600; text-decoration: underline; color:#000000;">ведение</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3; text-transform:uppercase;">ПРИМЕЧАНИЕ</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3;">Расширения работают только в Chrome/Chromium, запущенном с постоянным контекстом. Используйте пользовательские аргументы браузера на свой страх и риск, поскольку некоторые из них могут нарушить функциональность Playwright.</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3;">Ниже приведен код для получения дескриптора фоновой </span><a href="https://developer.chrome.com/extensions/background_pages"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; text-decoration: underline; color:#000000;">страницы</span></a><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3;"> расширения </span><a href="https://developer.chrome.com/docs/extensions/mv2/"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; text-decoration: underline; color:#000000;">Manifest v2</span></a><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3;"> , источник которого находится в </span><span style=" font-family:'Courier New'; font-size:16px; color:#e3e3e3; vertical-align:middle;">./my-extension</span><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3;">:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#000000;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Синхронизировать</span></li>
<li style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Асинхронный</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">from</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> playwright.sync_api </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">import</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> sync_playwright, Playwright<br /><br />path_to_extension = </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;./my-extension&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"><br />user_data_dir = </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;/tmp/test-user-data-dir&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"><br /><br /><br /></span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">def</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> </span><span style=" font-family:'Consolas'; font-size:16px; color:#dcdcaa;">run</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">(playwright: Playwright):<br />    context = playwright.chromium.launch_persistent_context(<br />        user_data_dir,<br />        headless=</span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">False</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />        args=[<br />            </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">f&quot;--disable-extensions-except=</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">{path_to_extension}</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />            </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">f&quot;--load-extension=</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">{path_to_extension}</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />        ],<br />    )<br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">if</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> </span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">len</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">(context.background_pages) == </span><span style=" font-family:'Consolas'; font-size:16px; color:#b5cea8;">0</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">:<br />        background_page = context.wait_for_event(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">'backgroundpage'</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)<br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">else</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">:<br />        background_page = context.background_pages[</span><span style=" font-family:'Consolas'; font-size:16px; color:#b5cea8;">0</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">]<br /><br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#6a9955;"># Test the background page as you would any other page.</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"><br />    context.close()<br /><br /><br /></span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">with</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> sync_playwright() </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">as</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> playwright:<br />    run(playwright)<br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:10px; color:#e3e3e3;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="testing"></a><a href="https://playwright.dev/python/docs/chrome-extensions#testing"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:x-large; font-weight:600; text-decoration: underline; color:#000000;">Т</span></a><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:x-large; font-weight:600; text-decoration: underline; color:#000000;">естирование</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3;">Чтобы расширение загружалось при запуске тестов, вы можете использовать тестовое приспособление для установки контекста. Вы также можете динамически получать идентификатор расширения и использовать его, например, для загрузки и тестирования всплывающей страницы.</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3;">Сначала добавьте фикстуры, которые будут загружать расширение:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; font-weight:496; color:#e3e3e3;">conftest.py</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">from</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> typing </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">import</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> Generator<br /></span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">from</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> pathlib </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">import</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> Path<br /></span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">from</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> playwright.sync_api </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">import</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> Playwright, BrowserContext<br /></span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">import</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> pytest<br /><br /><br />@pytest.fixture()<br /></span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">def</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> </span><span style=" font-family:'Consolas'; font-size:16px; color:#dcdcaa;">context</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">(playwright: Playwright) -&gt; Generator[BrowserContext, </span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">None</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">, </span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">None</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">]:<br />    path_to_extension = Path(__file__).parent.joinpath(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;my-extension&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)<br />    context = playwright.chromium.launch_persistent_context(<br />        </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />        headless=</span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">False</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />        args=[<br />            </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">f&quot;--disable-extensions-except=</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">{path_to_extension}</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />            </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">f&quot;--load-extension=</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">{path_to_extension}</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />        ],<br />    )<br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">yield</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> context<br />    context.close()<br /><br /><br />@pytest.fixture()<br /></span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">def</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> </span><span style=" font-family:'Consolas'; font-size:16px; color:#dcdcaa;">extension_id</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">(context) -&gt; Generator[</span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">str</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">, </span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">None</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">, </span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">None</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">]:<br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#6a9955;"># for manifest v2:</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"><br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#6a9955;"># background = context.background_pages[0]</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"><br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#6a9955;"># if not background:</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"><br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#6a9955;">#     background = context.wait_for_event(&quot;backgroundpage&quot;)</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"><br /><br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#6a9955;"># for manifest v3:</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"><br />    background = context.service_workers[</span><span style=" font-family:'Consolas'; font-size:16px; color:#b5cea8;">0</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">]<br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">if</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">not</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> background:<br />        background = context.wait_for_event(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;serviceworker&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)<br /><br />    extension_id = background.url.split(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;/&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)[</span><span style=" font-family:'Consolas'; font-size:16px; color:#b5cea8;">2</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">]<br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">yield</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> extension_id<br /><br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:10px; color:#e3e3e3;"><br /></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3;">Затем используйте эти приспособления в тесте:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; font-weight:496; color:#e3e3e3;">test_foo.py</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">from</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> playwright.sync_api </span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">import</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> expect, Page<br /><br /><br /></span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">def</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> </span><span style=" font-family:'Consolas'; font-size:16px; color:#dcdcaa;">test_example_test</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">(page: Page) -&gt; </span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">None</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">:<br />    page.goto(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;https://example.com&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)<br />    expect(page.locator(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;body&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)).to_contain_text(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;Changed by my-extension&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)<br /><br /><br /></span><span style=" font-family:'Consolas'; font-size:16px; color:#c586c0;">def</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;"> </span><span style=" font-family:'Consolas'; font-size:16px; color:#dcdcaa;">test_popup_page</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">(page: Page, extension_id: </span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">str</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">) -&gt; </span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">None</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">:<br />    page.goto(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">f&quot;chrome-extension://</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">{extension_id}</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">/popup.html&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)<br />    expect(page.locator(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;body&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)).to_have_text(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;my-extension popup&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)<br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:10px; color:#e3e3e3;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="headless-mode"></a><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:x-large; font-weight:600; color:#e3e3e3;">Б</span><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:x-large; font-weight:600; color:#e3e3e3;">езголовый</span><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:x-large; font-weight:600; color:#e3e3e3;"> </span><a href="https://playwright.dev/python/docs/chrome-extensions#headless-mode"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:x-large; font-weight:600; text-decoration: underline; color:#000000;">режим</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3; text-transform:uppercase;">ОПАСНОСТЬ</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:16px; color:#e3e3e3; vertical-align:middle;">headless=new</span><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3;">Режим официально не поддерживается Playwright и может привести к неожиданному поведению.</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; color:#e3e3e3;">По умолчанию безголовый режим Chrome в Playwright не поддерживает расширения Chrome. Чтобы преодолеть это ограничение, вы можете запустить постоянный контекст Chrome в новом безгласном режиме, используя следующий код:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; font-weight:496; color:#e3e3e3;">conftest.py</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">path_to_extension = Path(__file__).parent.joinpath(</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;my-extension&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">)<br />context = playwright.chromium.launch_persistent_context(<br />    </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />    headless=</span><span style=" font-family:'Consolas'; font-size:16px; color:#569cd6;">False</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />    args=[<br />        </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;--headless=new&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />        </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">f&quot;--disable-extensions-except=</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">{path_to_extension}</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />        </span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">f&quot;--load-extension=</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">{path_to_extension}</span><span style=" font-family:'Consolas'; font-size:16px; color:#ce9178;">&quot;</span><span style=" font-family:'Consolas'; font-size:16px; color:#d4d4d4;">,<br />    ],<br />)<br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:10px; color:#e3e3e3;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://playwright.dev/python/docs/browsers"><span style=" font-family:'system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol'; font-size:16px; text-decoration: underline; color:#000000;">П</span></a></p></body></html>