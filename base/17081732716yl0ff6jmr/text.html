<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-weight:400; font-style:normal; "  bgcolor="#ffffff">
Version:0.9
StartHTML:0000000169
EndHTML:0000088638
StartFragment:0000000205
EndFragment:0000088602
SourceURL:https://playwright.dev/python/docs/chrome-extensions
<html>
<body>
<!--StartFragment--><article style="box-sizing: border-box; color: rgb(227, 227, 227); font-family: system-ui, -apple-system, &quot;Segoe UI&quot;, Roboto, Ubuntu, Cantarell, &quot;Noto Sans&quot;, sans-serif, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(27, 27, 29); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><div class="theme-doc-markdown markdown" style="box-sizing: border-box; --ifm-h1-vertical-rhythm-top: 3; --ifm-h2-vertical-rhythm-top: 2; --ifm-h3-vertical-rhythm-top: 1.5; --ifm-heading-vertical-rhythm-top: 1.25; --ifm-h1-vertical-rhythm-bottom: 1.25; --ifm-heading-vertical-rhythm-bottom: 1;"><header style="box-sizing: border-box;"><h1 style="box-sizing: border-box; color: var(--ifm-heading-color); font-family: var(--ifm-heading-font-family); font-weight: var(--ifm-heading-font-weight); line-height: var(--ifm-heading-line-height); margin-top: ; margin-right: ; margin-bottom: calc(var(--ifm-h1-vertical-rhythm-bottom)*var(--ifm-leading)); margin-left: ; font-size: var(--ifm-h1-font-size); --ifm-h1-font-size: 3rem;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Расширения Chrome</font></font></h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction" style="box-sizing: border-box; color: var(--ifm-heading-color); font-family: var(--ifm-heading-font-family); font-weight: var(--ifm-heading-font-weight); line-height: var(--ifm-heading-line-height); margin-top: 0px; margin-right: ; margin-bottom: calc(var(--ifm-heading-vertical-rhythm-bottom)*var(--ifm-leading)); margin-left: ; font-size: var(--ifm-h2-font-size); scroll-margin-top: calc(var(--ifm-navbar-height) + .5rem); --ifm-h2-font-size: 2rem;"><font style="box-sizing: border-box; vertical-align: inherit;"><a href="https://playwright.dev/python/docs/chrome-extensions#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" style="box-sizing: border-box; transition: opacity var(--ifm-transition-fast); color: var(--ifm-link-color); text-decoration: var(--ifm-link-decoration); user-select: none; opacity: 0; padding-left: 0.5rem;"><font style="box-sizing: border-box; vertical-align: inherit;">Введение</font></a></font><a href="https://playwright.dev/python/docs/chrome-extensions#introduction" class="hash-link" aria-label="Прямая ссылка на введение" title="Прямая ссылка на введение" style="box-sizing: border-box; transition: opacity var(--ifm-transition-fast); color: var(--ifm-link-color); text-decoration: var(--ifm-link-decoration); user-select: none; opacity: 0; padding-left: 0.5rem;"><font style="box-sizing: border-box; vertical-align: inherit;"></font></a></h2><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary" style="box-sizing: border-box; color: var(--ifm-alert-foreground-color); --ifm-alert-background-color: var(--ifm-color-secondary-contrast-background); --ifm-alert-background-color-highlight: #ebedf026; --ifm-alert-foreground-color: var(--ifm-color-secondary-contrast-foreground); --ifm-alert-border-color: var(--ifm-color-secondary-dark); --ifm-code-background: var(--ifm-alert-background-color-highlight); --ifm-link-color: var(--ifm-alert-foreground-color); --ifm-link-hover-color: var(--ifm-alert-foreground-color); --ifm-link-decoration: underline; --ifm-tabs-color: var(--ifm-alert-foreground-color); --ifm-tabs-color-active: var(--ifm-alert-foreground-color); --ifm-tabs-color-active-border: var(--ifm-alert-border-color); background-color: var(--ifm-alert-background-color); border-top-color: ; border-top-style: ; border-top-width: ; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; border-left-width: var(--ifm-alert-border-left-width); border-radius: var(--ifm-alert-border-radius); box-shadow: var(--ifm-alert-shadow); padding: var(--ifm-alert-padding-vertical) var(--ifm-alert-padding-horizontal); margin-bottom: 1em;"><div class="admonitionHeading_Gvgb" style="box-sizing: border-box; text-transform: uppercase; font: var(--ifm-heading-font-weight) var(--ifm-h5-font-size)/var(--ifm-heading-line-height) var(--ifm-heading-font-family); margin-bottom: 0.3rem;"><span class="admonitionIcon_Rf37" style="box-sizing: border-box; display: inline-block; margin-right: 0.4em; vertical-align: middle;"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">ПРИМЕЧАНИЕ</font></font></div><div class="admonitionContent_BuS1" style="box-sizing: border-box;"><p style="box-sizing: border-box; margin-top: ; margin-right: ; margin-bottom: 0px; margin-left: ;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Расширения работают только в Chrome/Chromium, запущенном с постоянным контекстом. Используйте пользовательские аргументы браузера на свой страх и риск, поскольку некоторые из них могут нарушить функциональность Playwright.</font></font></p></div></div><p style="box-sizing: border-box; margin-top: ; margin-right: ; margin-bottom: var(--ifm-leading); margin-left: ;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Ниже приведен код для получения дескриптора фоновой<span> </span></font></font><a href="https://developer.chrome.com/extensions/background_pages" target="_blank" rel="noopener noreferrer" style="box-sizing: border-box; transition: color var(--ifm-transition-fast) var(--ifm-transition-timing-default); color: var(--ifm-link-color); text-decoration: var(--ifm-link-decoration);"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">страницы</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;"><span> </span>расширения<span> </span></font></font><a href="https://developer.chrome.com/docs/extensions/mv2/" target="_blank" rel="noopener noreferrer" style="box-sizing: border-box; transition: color var(--ifm-transition-fast) var(--ifm-transition-timing-default); color: var(--ifm-link-color); text-decoration: var(--ifm-link-decoration);"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Manifest v2</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;"><span> </span>, источник которого находится в<span> </span></font></font><code style="box-sizing: border-box; vertical-align: middle; background-color: var(--ifm-code-background); border: 0.1rem solid rgba(0, 0, 0, 0.1); border-radius: var(--ifm-code-border-radius); font-family: var(--ifm-font-family-monospace); font-size: var(--ifm-code-font-size); padding: var(--ifm-code-padding-vertical) var(--ifm-code-padding-horizontal);">./my-extension</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">:</font></font></p><div class="tabs-container tabList__CuJ" style="box-sizing: border-box; margin-bottom: var(--ifm-leading);"><ul role="tablist" aria-orientation="horizontal" class="tabs" style="box-sizing: border-box; margin-top: ; margin-right: ; margin-bottom: 0px; margin-left: ; padding-left: 0px; font-weight: var(--ifm-font-weight-bold); color: var(--ifm-tabs-color); display: flex; overflow-x: auto;"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active" style="box-sizing: border-box; margin-top: 0px !important; border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: var(--ifm-tabs-color-active-border); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; cursor: pointer; display: inline-flex; padding: var(--ifm-tabs-padding-vertical) var(--ifm-tabs-padding-horizontal); transition: background-color var(--ifm-transition-fast) var(--ifm-transition-timing-default); color: var(--ifm-tabs-color-active); overflow-wrap: break-word;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Синхронизировать</font></font></li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP" style="box-sizing: border-box; margin-top: var(--ifm-list-item-margin); border-bottom: 3px solid rgba(0, 0, 0, 0); border-radius: var(--ifm-global-radius); cursor: pointer; display: inline-flex; padding: var(--ifm-tabs-padding-vertical) var(--ifm-tabs-padding-horizontal); transition: background-color var(--ifm-transition-fast) var(--ifm-transition-timing-default); overflow-wrap: break-word;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Асинхронный</font></font></li></ul><div class="margin-top--md" style="box-sizing: border-box; margin-top: 1rem !important;"><div role="tabpanel" class="tabItem_Ymn6" style="box-sizing: border-box;"><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="box-sizing: border-box; background: var(--prism-background-color); color: var(--prism-color); border-radius: var(--ifm-code-border-radius); box-shadow: var(--ifm-global-shadow-lw); margin-bottom: 0px; --prism-color: #D4D4D4; --prism-background-color: #212121;"><div class="codeBlockContent_biex" style="box-sizing: border-box; border-radius: inherit; direction: ltr; position: relative;"><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">from</span><span class="token plain" style="box-sizing: border-box;"> playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">sync_api </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">import</span><span class="token plain" style="box-sizing: border-box;"> sync_playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"> Playwright</span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">path_to_extension </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"./my-extension"</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">user_data_dir </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"/tmp/test-user-data-dir"</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">def</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token function" style="box-sizing: border-box; color: rgb(220, 220, 170);">run</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"> Playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    context </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">chromium</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">launch_persistent_context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        user_data_dir</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        headless</span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token boolean" style="box-sizing: border-box; color: rgb(86, 156, 214);">False</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        args</span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">[</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">            </span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">f"--disable-extensions-except=</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">{</span><span class="token string-interpolation interpolation" style="box-sizing: border-box;">path_to_extension</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">}</span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">            </span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">f"--load-extension=</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">{</span><span class="token string-interpolation interpolation" style="box-sizing: border-box;">path_to_extension</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">}</span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        </span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">]</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">if</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token builtin" style="box-sizing: border-box; color: rgb(86, 156, 214);">len</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">background_pages</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">==</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token number" style="box-sizing: border-box; color: rgb(181, 206, 168);">0</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        background_page </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">wait_for_event</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">'backgroundpage'</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">else</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        background_page </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">background_pages</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">[</span><span class="token number" style="box-sizing: border-box; color: rgb(181, 206, 168);">0</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">]</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token comment" style="box-sizing: border-box; color: rgb(106, 153, 85);"># Test the background page as you would any other page.</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">close</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">with</span><span class="token plain" style="box-sizing: border-box;"> sync_playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">as</span><span class="token plain" style="box-sizing: border-box;"> playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    run</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><br style="box-sizing: border-box;"></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><div class="buttonGroup__atx" style="box-sizing: border-box; column-gap: 0.2rem; display: flex; position: absolute; right: calc(var(--ifm-pre-padding)/2); top: calc(var(--ifm-pre-padding)/2);"><button type="button" aria-label="Скопировать код в буфер обмена" title="Копировать" class="clean-btn" style="box-sizing: border-box; background: var(--prism-background-color); border: 1px solid var(--ifm-color-emphasis-300); color: var(--prism-color); cursor: pointer; font-family: inherit; padding: 0.4rem; align-items: center; border-radius: var(--ifm-global-radius); display: flex; line-height: 0; opacity: 0; transition: opacity var(--ifm-transition-fast) ease-in-out;"><span class="copyButtonIcons_eSgA" aria-hidden="true" style="box-sizing: border-box; height: 1.125rem; position: relative; width: 1.125rem;"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing" style="box-sizing: border-box; color: var(--ifm-heading-color); font-family: var(--ifm-heading-font-family); font-weight: var(--ifm-heading-font-weight); line-height: var(--ifm-heading-line-height); margin-top: calc(var(--ifm-h2-vertical-rhythm-top)*var(--ifm-leading)); margin-right: ; margin-bottom: calc(var(--ifm-heading-vertical-rhythm-bottom)*var(--ifm-leading)); margin-left: ; font-size: var(--ifm-h2-font-size); scroll-margin-top: calc(var(--ifm-navbar-height) + .5rem); --ifm-h2-font-size: 2rem;"><font style="box-sizing: border-box; vertical-align: inherit;"><a href="https://playwright.dev/python/docs/chrome-extensions#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing" style="box-sizing: border-box; transition: opacity var(--ifm-transition-fast); color: var(--ifm-link-color); text-decoration: var(--ifm-link-decoration); user-select: none; opacity: 0; padding-left: 0.5rem;"><font style="box-sizing: border-box; vertical-align: inherit;">Тестирование</font></a></font><a href="https://playwright.dev/python/docs/chrome-extensions#testing" class="hash-link" aria-label="Прямая ссылка на тестирование" title="Прямая ссылка на тестирование" style="box-sizing: border-box; transition: opacity var(--ifm-transition-fast); color: var(--ifm-link-color); text-decoration: var(--ifm-link-decoration); user-select: none; opacity: 0; padding-left: 0.5rem;"><font style="box-sizing: border-box; vertical-align: inherit;"></font></a></h2><p style="box-sizing: border-box; margin-top: ; margin-right: ; margin-bottom: var(--ifm-leading); margin-left: ;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Чтобы расширение загружалось при запуске тестов, вы можете использовать тестовое приспособление для установки контекста. Вы также можете динамически получать идентификатор расширения и использовать его, например, для загрузки и тестирования всплывающей страницы.</font></font></p><p style="box-sizing: border-box; margin-top: ; margin-right: ; margin-bottom: var(--ifm-leading); margin-left: ;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Сначала добавьте фикстуры, которые будут загружать расширение:</font></font></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="box-sizing: border-box; background: var(--prism-background-color); color: var(--prism-color); border-radius: var(--ifm-code-border-radius); box-shadow: var(--ifm-global-shadow-lw); margin-bottom: var(--ifm-leading); --prism-color: #D4D4D4; --prism-background-color: #212121;"><div class="codeBlockTitle_Ktv7" style="box-sizing: border-box; border-bottom: 1px solid var(--ifm-color-emphasis-300); border-top-left-radius: inherit; border-top-right-radius: inherit; font-size: var(--ifm-code-font-size); font-weight: 500; padding: .75rem var(--ifm-pre-padding);"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">conftest.py</font></font></div><div class="codeBlockContent_biex" style="box-sizing: border-box; border-radius: inherit; direction: ltr; position: relative;"><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">from</span><span class="token plain" style="box-sizing: border-box;"> typing </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">import</span><span class="token plain" style="box-sizing: border-box;"> Generator</span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">from</span><span class="token plain" style="box-sizing: border-box;"> pathlib </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">import</span><span class="token plain" style="box-sizing: border-box;"> Path</span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">from</span><span class="token plain" style="box-sizing: border-box;"> playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">sync_api </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">import</span><span class="token plain" style="box-sizing: border-box;"> Playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"> BrowserContext</span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">import</span><span class="token plain" style="box-sizing: border-box;"> pytest</span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token decorator annotation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">@pytest</span><span class="token decorator annotation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token decorator annotation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">fixture</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">def</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token function" style="box-sizing: border-box; color: rgb(220, 220, 170);">context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"> Playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">-</span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">&gt;</span><span class="token plain" style="box-sizing: border-box;"> Generator</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">[</span><span class="token plain" style="box-sizing: border-box;">BrowserContext</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token boolean" style="box-sizing: border-box; color: rgb(86, 156, 214);">None</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token boolean" style="box-sizing: border-box; color: rgb(86, 156, 214);">None</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">]</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    path_to_extension </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> Path</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">__file__</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">parent</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">joinpath</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"my-extension"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    context </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">chromium</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">launch_persistent_context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        </span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">""</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        headless</span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token boolean" style="box-sizing: border-box; color: rgb(86, 156, 214);">False</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        args</span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">[</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">            </span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">f"--disable-extensions-except=</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">{</span><span class="token string-interpolation interpolation" style="box-sizing: border-box;">path_to_extension</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">}</span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">            </span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">f"--load-extension=</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">{</span><span class="token string-interpolation interpolation" style="box-sizing: border-box;">path_to_extension</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">}</span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        </span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">]</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">yield</span><span class="token plain" style="box-sizing: border-box;"> context</span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">close</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token decorator annotation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">@pytest</span><span class="token decorator annotation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token decorator annotation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">fixture</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">def</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token function" style="box-sizing: border-box; color: rgb(220, 220, 170);">extension_id</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">-</span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">&gt;</span><span class="token plain" style="box-sizing: border-box;"> Generator</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">[</span><span class="token builtin" style="box-sizing: border-box; color: rgb(86, 156, 214);">str</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token boolean" style="box-sizing: border-box; color: rgb(86, 156, 214);">None</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token boolean" style="box-sizing: border-box; color: rgb(86, 156, 214);">None</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">]</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token comment" style="box-sizing: border-box; color: rgb(106, 153, 85);"># for manifest v2:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token comment" style="box-sizing: border-box; color: rgb(106, 153, 85);"># background = context.background_pages[0]</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token comment" style="box-sizing: border-box; color: rgb(106, 153, 85);"># if not background:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token comment" style="box-sizing: border-box; color: rgb(106, 153, 85);">#     background = context.wait_for_event("backgroundpage")</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token comment" style="box-sizing: border-box; color: rgb(106, 153, 85);"># for manifest v3:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    background </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">service_workers</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">[</span><span class="token number" style="box-sizing: border-box; color: rgb(181, 206, 168);">0</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">]</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">if</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">not</span><span class="token plain" style="box-sizing: border-box;"> background</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        background </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">wait_for_event</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"serviceworker"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    extension_id </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> background</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">url</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">split</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"/"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">[</span><span class="token number" style="box-sizing: border-box; color: rgb(181, 206, 168);">2</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">]</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">yield</span><span class="token plain" style="box-sizing: border-box;"> extension_id</span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><div class="buttonGroup__atx" style="box-sizing: border-box; column-gap: 0.2rem; display: flex; position: absolute; right: calc(var(--ifm-pre-padding)/2); top: calc(var(--ifm-pre-padding)/2);"><button type="button" aria-label="Скопировать код в буфер обмена" title="Копировать" class="clean-btn" style="box-sizing: border-box; background: var(--prism-background-color); border: 1px solid var(--ifm-color-emphasis-300); color: var(--prism-color); cursor: pointer; font-family: inherit; padding: 0.4rem; align-items: center; border-radius: var(--ifm-global-radius); display: flex; line-height: 0; opacity: 0; transition: opacity var(--ifm-transition-fast) ease-in-out;"><span class="copyButtonIcons_eSgA" aria-hidden="true" style="box-sizing: border-box; height: 1.125rem; position: relative; width: 1.125rem;"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p style="box-sizing: border-box; margin-top: ; margin-right: ; margin-bottom: var(--ifm-leading); margin-left: ;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Затем используйте эти приспособления в тесте:</font></font></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="box-sizing: border-box; background: var(--prism-background-color); color: var(--prism-color); border-radius: var(--ifm-code-border-radius); box-shadow: var(--ifm-global-shadow-lw); margin-bottom: var(--ifm-leading); --prism-color: #D4D4D4; --prism-background-color: #212121;"><div class="codeBlockTitle_Ktv7" style="box-sizing: border-box; border-bottom: 1px solid var(--ifm-color-emphasis-300); border-top-left-radius: inherit; border-top-right-radius: inherit; font-size: var(--ifm-code-font-size); font-weight: 500; padding: .75rem var(--ifm-pre-padding);"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">test_foo.py</font></font></div><div class="codeBlockContent_biex" style="box-sizing: border-box; border-radius: inherit; direction: ltr; position: relative;"><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">from</span><span class="token plain" style="box-sizing: border-box;"> playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">sync_api </span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">import</span><span class="token plain" style="box-sizing: border-box;"> expect</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"> Page</span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">def</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token function" style="box-sizing: border-box; color: rgb(220, 220, 170);">test_example_test</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">page</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"> Page</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">-</span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">&gt;</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token boolean" style="box-sizing: border-box; color: rgb(86, 156, 214);">None</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    page</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">goto</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"https://example.com"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    expect</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">page</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">locator</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"body"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">to_contain_text</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"Changed by my-extension"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box; display: inline-block;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token keyword" style="box-sizing: border-box; color: rgb(197, 134, 192);">def</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token function" style="box-sizing: border-box; color: rgb(220, 220, 170);">test_popup_page</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">page</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"> Page</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"> extension_id</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token builtin" style="box-sizing: border-box; color: rgb(86, 156, 214);">str</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">-</span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">&gt;</span><span class="token plain" style="box-sizing: border-box;"> </span><span class="token boolean" style="box-sizing: border-box; color: rgb(86, 156, 214);">None</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">:</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    page</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">goto</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">f"chrome-extension://</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">{</span><span class="token string-interpolation interpolation" style="box-sizing: border-box;">extension_id</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">}</span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">/popup.html"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    expect</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">page</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">locator</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"body"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">to_have_text</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"my-extension popup"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><br style="box-sizing: border-box;"></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><div class="buttonGroup__atx" style="box-sizing: border-box; column-gap: 0.2rem; display: flex; position: absolute; right: calc(var(--ifm-pre-padding)/2); top: calc(var(--ifm-pre-padding)/2);"><button type="button" aria-label="Скопировать код в буфер обмена" title="Копировать" class="clean-btn" style="box-sizing: border-box; background: var(--prism-background-color); border: 1px solid var(--ifm-color-emphasis-300); color: var(--prism-color); cursor: pointer; font-family: inherit; padding: 0.4rem; align-items: center; border-radius: var(--ifm-global-radius); display: flex; line-height: 0; opacity: 0; transition: opacity var(--ifm-transition-fast) ease-in-out;"><span class="copyButtonIcons_eSgA" aria-hidden="true" style="box-sizing: border-box; height: 1.125rem; position: relative; width: 1.125rem;"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="headless-mode" style="box-sizing: border-box; color: var(--ifm-heading-color); font-family: var(--ifm-heading-font-family); font-weight: var(--ifm-heading-font-weight); line-height: var(--ifm-heading-line-height); margin-top: calc(var(--ifm-h2-vertical-rhythm-top)*var(--ifm-leading)); margin-right: ; margin-bottom: calc(var(--ifm-heading-vertical-rhythm-bottom)*var(--ifm-leading)); margin-left: ; font-size: var(--ifm-h2-font-size); scroll-margin-top: calc(var(--ifm-navbar-height) + .5rem); --ifm-h2-font-size: 2rem;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Безголовый<span> </span></font></font><a href="https://playwright.dev/python/docs/chrome-extensions#headless-mode" class="hash-link" aria-label="Прямая ссылка на безголовый режим" title="Прямая ссылка на безголовый режим" style="box-sizing: border-box; transition: opacity var(--ifm-transition-fast); color: var(--ifm-link-color); text-decoration: var(--ifm-link-decoration); user-select: none; opacity: 0; padding-left: 0.5rem;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">режим</font></font></a></h2><div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger" style="box-sizing: border-box; color: var(--ifm-alert-foreground-color); --ifm-alert-background-color: var(--ifm-color-danger-contrast-background); --ifm-alert-background-color-highlight: #fa383e26; --ifm-alert-foreground-color: var(--ifm-color-danger-contrast-foreground); --ifm-alert-border-color: var(--ifm-color-danger-dark); --ifm-code-background: var(--ifm-alert-background-color-highlight); --ifm-link-color: var(--ifm-alert-foreground-color); --ifm-link-hover-color: var(--ifm-alert-foreground-color); --ifm-link-decoration: underline; --ifm-tabs-color: var(--ifm-alert-foreground-color); --ifm-tabs-color-active: var(--ifm-alert-foreground-color); --ifm-tabs-color-active-border: var(--ifm-alert-border-color); background-color: var(--ifm-alert-background-color); border-top-color: ; border-top-style: ; border-top-width: ; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; border-left-width: var(--ifm-alert-border-left-width); border-radius: var(--ifm-alert-border-radius); box-shadow: var(--ifm-alert-shadow); padding: var(--ifm-alert-padding-vertical) var(--ifm-alert-padding-horizontal); margin-bottom: 1em;"><div class="admonitionHeading_Gvgb" style="box-sizing: border-box; text-transform: uppercase; font: var(--ifm-heading-font-weight) var(--ifm-h5-font-size)/var(--ifm-heading-line-height) var(--ifm-heading-font-family); margin-bottom: 0.3rem;"><span class="admonitionIcon_Rf37" style="box-sizing: border-box; display: inline-block; margin-right: 0.4em; vertical-align: middle;"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">ОПАСНОСТЬ</font></font></div><div class="admonitionContent_BuS1" style="box-sizing: border-box;"><p style="box-sizing: border-box; margin-top: ; margin-right: ; margin-bottom: 0px; margin-left: ;"><code style="box-sizing: border-box; vertical-align: middle; background-color: var(--ifm-code-background); border: 0.1rem solid rgba(0, 0, 0, 0.1); border-radius: var(--ifm-code-border-radius); font-family: var(--ifm-font-family-monospace); font-size: var(--ifm-code-font-size); padding: var(--ifm-code-padding-vertical) var(--ifm-code-padding-horizontal);">headless=new</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Режим официально не поддерживается Playwright и может привести к неожиданному поведению.</font></font></p></div></div><p style="box-sizing: border-box; margin-top: ; margin-right: ; margin-bottom: var(--ifm-leading); margin-left: ;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">По умолчанию безголовый режим Chrome в Playwright не поддерживает расширения Chrome. Чтобы преодолеть это ограничение, вы можете запустить постоянный контекст Chrome в новом безгласном режиме, используя следующий код:</font></font></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="box-sizing: border-box; background: var(--prism-background-color); color: var(--prism-color); border-radius: var(--ifm-code-border-radius); box-shadow: var(--ifm-global-shadow-lw); margin-bottom: 0px !important; --prism-color: #D4D4D4; --prism-background-color: #212121;"><div class="codeBlockTitle_Ktv7" style="box-sizing: border-box; border-bottom: 1px solid var(--ifm-color-emphasis-300); border-top-left-radius: inherit; border-top-right-radius: inherit; font-size: var(--ifm-code-font-size); font-weight: 500; padding: .75rem var(--ifm-pre-padding);"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">conftest.py</font></font></div><div class="codeBlockContent_biex" style="box-sizing: border-box; border-radius: inherit; direction: ltr; position: relative;"><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">path_to_extension </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> Path</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;">__file__</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">parent</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">joinpath</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"my-extension"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">context </span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token plain" style="box-sizing: border-box;"> playwright</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">chromium</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">.</span><span class="token plain" style="box-sizing: border-box;">launch_persistent_context</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">(</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">""</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    headless</span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token boolean" style="box-sizing: border-box; color: rgb(86, 156, 214);">False</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    args</span><span class="token operator" style="box-sizing: border-box; color: rgb(212, 212, 212);">=</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">[</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        </span><span class="token string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"--headless=new"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        </span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">f"--disable-extensions-except=</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">{</span><span class="token string-interpolation interpolation" style="box-sizing: border-box;">path_to_extension</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">}</span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">        </span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">f"--load-extension=</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">{</span><span class="token string-interpolation interpolation" style="box-sizing: border-box;">path_to_extension</span><span class="token string-interpolation interpolation punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">}</span><span class="token string-interpolation string" style="box-sizing: border-box; color: rgb(206, 145, 120);">"</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;">    </span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">]</span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">,</span><span class="token plain" style="box-sizing: border-box;"></span><br style="box-sizing: border-box;"></span><span class="token-line" style="box-sizing: border-box; color: rgb(212, 212, 212);"><span class="token plain" style="box-sizing: border-box;"></span><span class="token punctuation" style="box-sizing: border-box; color: rgb(212, 212, 212);">)</span><br style="box-sizing: border-box;"></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><div class="buttonGroup__atx" style="box-sizing: border-box; column-gap: 0.2rem; display: flex; position: absolute; right: calc(var(--ifm-pre-padding)/2); top: calc(var(--ifm-pre-padding)/2);"><button type="button" aria-label="Скопировать код в буфер обмена" title="Копировать" class="clean-btn" style="box-sizing: border-box; background: var(--prism-background-color); border: 1px solid var(--ifm-color-emphasis-300); color: var(--prism-color); cursor: pointer; font-family: inherit; padding: 0.4rem; align-items: center; border-radius: var(--ifm-global-radius); display: flex; line-height: 0; opacity: 0; transition: opacity var(--ifm-transition-fast) ease-in-out;"><span class="copyButtonIcons_eSgA" aria-hidden="true" style="box-sizing: border-box; height: 1.125rem; position: relative; width: 1.125rem;"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Страницы документации" style="box-sizing: border-box; display: grid; gap: var(--ifm-spacing-horizontal); grid-template-columns: repeat(2, 1fr); margin-top: 3rem; color: rgb(227, 227, 227); font-family: system-ui, -apple-system, &quot;Segoe UI&quot;, Roboto, Ubuntu, Cantarell, &quot;Noto Sans&quot;, sans-serif, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(27, 27, 29); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><a class="pagination-nav__link pagination-nav__link--prev" href="https://playwright.dev/python/docs/browsers" style="box-sizing: border-box; transition: border-color var(--ifm-transition-fast) var(--ifm-transition-timing-default); color: var(--ifm-link-color); text-decoration: var(--ifm-link-decoration); border: 1px solid var(--ifm-color-emphasis-300); border-radius: var(--ifm-pagination-nav-border-radius); display: block; height: 75.5px; line-height: var(--ifm-heading-line-height); padding: var(--ifm-global-spacing);"><div class="pagination-nav__sublabel" style="box-sizing: border-box; color: var(--ifm-color-content-secondary); font-size: var(--ifm-h5-font-size); font-weight: var(--ifm-font-weight-semibold); margin-bottom: 0.25rem;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">П</font></font></div></a></nav><!--EndFragment-->
</body>
</html></body></html>