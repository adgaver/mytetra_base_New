<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:xx-large; color:#000000;">Улучшение временных диаграмм в Power BI с помощью DAX</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:22px; font-weight:296; color:#666666;">В этой статье показано, как улучшить линейные диаграммы с помощью оси X на основе даты в Power BI с помощью DAX, а также как сделать правильный выбор в свойствах моделирования и визуализации данных.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14px; color:#000000;">17 АВГУСТА 2020 Г.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10px; color:#000000; background-color:#078fdd;">ОБНОВЛЕНО</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10px; color:#000000; background-color:#078fdd;">Марко Руссо</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:61px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><a href="https://www.sqlbi.com/topics/dax/"><span style=" font-family:'effra,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:14px; font-weight:696; color:#ec5d5d; background-color:transparent; text-transform:uppercase;">ДАКС</span></a><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:14px; color:#333333;">   </span><a href="https://www.sqlbi.com/topics/power-bi/"><span style=" font-family:'effra,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:14px; font-weight:696; color:#ec5d5d; background-color:transparent; text-transform:uppercase;">POWER BI</span></a><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:14px; color:#333333;">  </span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Линейные диаграммы в Power BI — полезный инструмент визуализации для отображения событий, происходящих с течением времени. Однако линейные графики дают оптимальные результаты при использовании дневной детализации. Чтобы получить наилучшую визуализацию на других уровнях детализации, необходимо внести изменения в модель данных и написать выражение DAX. В следующих разделах вы увидите, как:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;" style=" margin-top:12px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Управление свойствами категориальных линейных диаграмм</span></li>
<li style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;" style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Используйте непрерывную линейную диаграмму для детализации по месяцам и кварталам.</span></li>
<li style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;" style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Внедрение детализации по неделям</span></li>
<li style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;" style=" margin-top:10px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Скрыть неполные недели при выборе месяца/квартала/года</span></li></ul>
<p style=" margin-top:60px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.2%;"><span style=" font-family:'effra,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:x-large; font-weight:696; color:#333333;">Управление категориальными линейными диаграммами с временными данными</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Прежде чем анализировать решение, нам необходимо четко сформулировать проблему. В модели, использованной для демонстрации, таблица «Дата» содержит иерархию «Год/Квартал/Месяц». Если вы построите линейную диаграмму с объемом продаж и поместите иерархию на ось, вы получите следующий результат.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">В примере модели мы используем пользовательскую таблицу дат. Однако если бы мы использовали параметр «Автоматическая дата/время» в Power BI, результат был бы почти таким же. Действительно, наличие иерархии в свойстве «Ось» линейной диаграммы заставляет Power BI отображать первый иерархический уровень — «Год». В результате диаграмма содержит только три точки, тогда как пользователям, вероятно, потребуется больше точек, чтобы получить какую-либо информацию.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Вот как будут выглядеть свойства, если вы используете пользовательскую таблицу дат.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Нажав кнопку «Развернуть следующий уровень», выделенную на следующем снимке экрана, вы можете перейти на следующий уровень иерархии, примененной к свойству «Ось».</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Это действие отображает данные на уровне квартала, который в этой модели определяется с помощью строки, включающей как квартал, так и год, что, в свою очередь, делает столбец квартала уникальным для разных лет. Результат кажется избыточным по оси X, поскольку год повторяется дважды для каждой точки данных.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Повторяя операцию «Развернуть следующий уровень», мы переходим на уровень месяца иерархии календаря.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Эта визуализация сбивает с толку, поскольку год повторяется три раза для каждой метки точки данных на оси X. Однако использование столбцов квартала и месяца, в которых отображается только название квартала или месяца без года, не решит проблему полностью. Год по-прежнему будет дублироваться для каждой точки диаграммы.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Частичным решением является отключение свойства «Объединить метки» в разделе «Ось X» визуального элемента «Линейная диаграмма», как показано на следующем снимке экрана.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Результат, показанный на следующем снимке экрана, улучшился лишь незначительно. Удаление года с уровня «Квартал» и «Месяц» может улучшить качество чтения, но трудно придумать, как отобразить более трех лет на одной диаграмме. Действительно, Power BI показывает метку для каждой точки, создавая полосу прокрутки, которая отображает только часть отчета, когда меток слишком много. (Однако на следующей диаграмме по-прежнему указан номер года на уровне квартала и месяца).</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Последняя визуализация отображает 36 точек. Увеличение количества лет сделает его нечитаемым в одной визуализации. Более того, расширение диаграммы до уровня недели потребует отображения 52 точек за каждый год, что снова создаст ту же проблему: слишком много точек, слишком много меток.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Все использованные до сих пор линейные диаграммы используют категориальный тип, поскольку данные отображаются с помощью строк. Линейная диаграмма предлагает альтернативный тип визуализации, называемый Непрерывный, для которого требуется столбец с числом или датой для свойства Ось. Тип визуализации «Непрерывный» отображает меньшее количество меток для оси, поскольку отсутствующие метки можно определить по расстоянию от существующих меток. Непрерывная визуализация также обеспечивает специальное управление столбцами дат, отображающее упрощенную метку «Год-Месяц». Например, на следующем снимке экрана показана та же мера, что и раньше, на этот раз с использованием типа визуализации «Непрерывная». Расстояние между метками можно определить по линиям сетки, которые применяются к каждой видимой метке оси.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Для свойства «Тип» в области «Ось X» свойств линейной диаграммы можно установить значение «Непрерывный», поскольку ось теперь имеет столбец «Дата» из таблицы «Дата», который является типом данных «Дата». С типом визуализации «Непрерывная» можно использовать только даты и числа. Свойство Gridlines также включено и является частью той же области оси X.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Непрерывные линейные диаграммы улучшают работу с метками, но мы были вынуждены использовать дневную детализацию. В результате в линейный график будет включено 1000 точек, но, что наиболее важно, это может быть не та степень детализации, которую хочет отобразить пользователь. Лучшее понимание можно получить, используя данные по месяцам или неделям. В следующих разделах мы покажем, как преодолеть это ограничение, изменив модель данных с помощью кода DAX.</span></p>
<p style=" margin-top:60px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.2%;"><span style=" font-family:'effra,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:x-large; font-weight:696; color:#333333;">Использование непрерывных линейных диаграмм с детализацией по месяцам и кварталам</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Непрерывный тип линейной диаграммы доступен только для числовых столбцов. Столбец даты внутренне управляется как число, а визуализация линейной диаграммы также отображает даты разумным образом, как вы видели в предыдущем разделе. Непрерывная визуализация устраняет необходимость в горизонтальной полосе прокрутки в случае, если на оси X слишком много точек, сжимая все точки данных в одной визуализации. Такое поведение также может быть полезно при отображении данных с разной степенью детализации, например по месяцам и кварталам.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Другими словами, вам нужен столбец «Дата» на оси, чтобы использовать непрерывную визуализацию. Тем не менее, при более низкой степени детализации, например месяце или квартале, столбец, используемый для среза, обычно представляет собой строку, представляющую этот месяц или квартал. В этом сценарии кажется, что вы не можете использовать тип Continuous и вынуждены использовать тип Categorical (со всеми его ограничениями), но это не так.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Чтобы разблокировать тип Непрерывный для разных периодов времени, необходимо отобразить желаемую степень детализации с помощью столбца «Дата», который объединяет весь период в одну дату. Более интуитивный подход заключается в агрегировании всего периода по последней дате самого периода. Например, мы можем создать следующие два вычисляемых столбца в таблице «Дата».</span></p>
<p style="-qt-paragraph-type:empty; margin-top:30px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333; background-color:#ffffff;"><br /></p>
<table border="0" style=" margin-top:15px; margin-bottom:30px; margin-left:0px; margin-right:0px;" cellspacing="0" cellpadding="0">
<tr>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="code1"></a><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">1</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">2</span></p></td>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">Year</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">-</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">Month </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">EOMONTH</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'[Date]</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#ee7f18;">0</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f5f5f5;"><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#"><span style=" font-family:'Arial,sans-serif'; font-size:12px; font-weight:496; color:#333333; background-color:transparent; text-transform:uppercase;">КОПИРОВАТЬКОНВЕНЦИИ</span></a><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#code1"><span style=" font-family:'Consolas,Menlo,Monaco,monospace'; font-size:13px; font-weight:600; color:#c2c2c2; background-color:transparent; text-transform:uppercase;">№</span></a><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#code1"><span style=" font-family:'Consolas,Menlo,Monaco,monospace'; font-size:15px; font-weight:600; color:#c2c2c2; background-color:transparent; text-transform:uppercase;"> 1</span></a></p>
<p style="-qt-paragraph-type:empty; margin-top:30px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333; background-color:#ffffff;"><br /></p>
<table border="0" style=" margin-top:15px; margin-bottom:30px; margin-left:0px; margin-right:0px;" cellspacing="0" cellpadding="0">
<tr>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="code2"></a><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">1</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">2</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">3</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">4</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">5</span></p></td>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">Year</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">-</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">Quarter </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">CALCULATE</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">MAX</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'[Date] </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">),</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">ALLEXCEPT</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'[Year Quarter Number] </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f5f5f5;"><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#"><span style=" font-family:'Arial,sans-serif'; font-size:12px; font-weight:496; color:#333333; background-color:transparent; text-transform:uppercase;">КОПИРОВАТЬКОНВЕНЦИИ</span></a><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#code2"><span style=" font-family:'Consolas,Menlo,Monaco,monospace'; font-size:13px; font-weight:600; color:#c2c2c2; background-color:transparent; text-transform:uppercase;">#</span></a><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#code2"><span style=" font-family:'Consolas,Menlo,Monaco,monospace'; font-size:15px; font-weight:600; color:#c2c2c2; background-color:transparent; text-transform:uppercase;"> 2</span></a></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Мы намеренно использовали две разные техники. В вычисляемом столбце «Год-месяц» вычисляется конец месяца с помощью функции </span><a href="https://dax.guide/eomonth/?aff=sqlbi"><span style=" font-family:'Consolas,monospace'; font-size:16px; font-weight:496; color:#035aca; background-color:transparent;">EOMONTH</span></a><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;"> DAX. Это может работать для любого стандартного календаря. Однако для пользовательских календарей или для детализации, отличной от месяца, метод, используемый здесь для вычисления вычисляемых столбцов «Год-Квартал», всегда действителен: просто используйте </span><a href="https://dax.guide/allexcept/?aff=sqlbi"><span style=" font-family:'Consolas,monospace'; font-size:16px; font-weight:496; color:#035aca; background-color:transparent;">ALLEXCEPT</span></a><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;"> , сохраняя в контексте фильтра один или несколько столбцов, определяющих требуемый период. Всегда полезно использовать один столбец, представляющий необходимую степень детализации. Однако если бы квартал не был уникальным для каждого года, у нас не было бы столбца «Номер квартала года»; </span><a href="https://dax.guide/allexcept/?aff=sqlbi"><span style=" font-family:'Consolas,monospace'; font-size:16px; font-weight:496; color:#035aca; background-color:transparent;">ALLEXCEPT</span></a><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;"> ('Дата', 'Дата'[Год], 'Дата'[Номер квартала]) потребовалось бы.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">На следующем снимке экрана показана непрерывная визуализация с использованием столбца «Год-Месяц» в свойстве «Ось». Мы также включили свойства «Метки данных» и «Ось X/Заголовок» для этой диаграммы.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Заменив свойство «Ось» столбцом «Год-Квартал», можно получить поквартальную детализацию диаграммы. Единственное предостережение заключается в том, что по умолчанию в этом случае во всплывающей подсказке будет отображаться используемая дата (конец квартала) в качестве метки в самой всплывающей подсказке. Обходной путь — использовать формат отображения ММММ гггг для столбцов конца квартала и конца месяца. Однако конец периода не будет уточнять, осуществляется ли детализация по месяцам или по кварталам, поэтому важно отображать детализацию на оси, включая визуализацию заголовка, которую мы также включили в предыдущей линейной диаграмме, рассчитанной с использованием детализации по месяцам. (на следующем снимке экрана не применяется формат МММ гггг, который используется в файле примера, который вы можете скачать).</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Как вы видели, использование даты для обозначения месяцев и кварталов оказывается полезным приемом, позволяющим разблокировать тип непрерывной визуализации. Следующим шагом является отображение данных с детализацией по неделям, как описано в следующем разделе.</span></p>
<p style=" margin-top:60px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.2%;"><span style=" font-family:'effra,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:x-large; font-weight:696; color:#333333;">Использование непрерывных линейных диаграмм с недельной детализацией</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Поскольку недели не совпадают с месяцами, кварталами или годами, нам нужен столбец детализации по неделям, группирующий все дни в пределах одной недели. Создадим два вычисляемых столбца в таблице «Дата»:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;" style=" margin-top:12px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px; font-weight:696;">YearWeekNumber</span><span style=" font-size:16px;"> вычисляет последовательное число, представляющее количество недель с контрольной даты. Переменная FirstDayOfWeek в этом выражении DAX определяет первый день недели. Вычисляемый столбец YearWeekNumber можно скрыть.</span></li>
<li style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;" style=" margin-top:10px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px; font-weight:696;">Неделя</span><span style=" font-size:16px;"> содержит последний день недели, рассчитанный с использованием метода, показанного ранее для расчета последнего дня квартала: даты группируются по столбцу YearWeekNumber, вычисленному на предыдущем шаге.</span></li></ul>
<p style="-qt-paragraph-type:empty; margin-top:30px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333; background-color:#ffffff;"><br /></p>
<table border="0" style=" margin-top:15px; margin-bottom:30px; margin-left:0px; margin-right:0px;" cellspacing="0" cellpadding="0">
<tr>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="code3"></a><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">1</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">2</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">3</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">4</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">5</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">6</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">7</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">8</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">9</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">10</span></p></td>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">YearWeekNumber </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstDayOfWeek </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">= </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#ee7f18;">0</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#39a03b;">-- Use: 0 for Sunday, 1 for Monday, ... , 6 for Saturday</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstSundayReference </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">DATE</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#ee7f18;">1900</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#ee7f18;">12</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#ee7f18;">30</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#39a03b;">-- Do not change this </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">CalDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">= 'Date'[Date] </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#39a03b;">-- This is the date to compute</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstWeekReference </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">= </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstSundayReference </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">+ </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstDayOfWeek</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">YearWeekNumber </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">INT</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">DIVIDE</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">CalDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">- </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstWeekReference</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#ee7f18;">7</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">RETURN</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">YearWeekNumber</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f5f5f5;"><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#"><span style=" font-family:'Arial,sans-serif'; font-size:12px; font-weight:496; color:#333333; background-color:transparent; text-transform:uppercase;">КОПИРОВАТЬКОНВЕНЦИИ</span></a><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#code3"><span style=" font-family:'Consolas,Menlo,Monaco,monospace'; font-size:13px; font-weight:600; color:#c2c2c2; background-color:transparent; text-transform:uppercase;">№</span></a><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#code3"><span style=" font-family:'Consolas,Menlo,Monaco,monospace'; font-size:15px; font-weight:600; color:#c2c2c2; background-color:transparent; text-transform:uppercase;"> 3</span></a></p>
<p style="-qt-paragraph-type:empty; margin-top:30px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333; background-color:#ffffff;"><br /></p>
<table border="0" style=" margin-top:15px; margin-bottom:30px; margin-left:0px; margin-right:0px;" cellspacing="0" cellpadding="0">
<tr>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="code4"></a><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">1</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">2</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">3</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">4</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">5</span></p></td>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">Week </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">CALCULATE</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">MAX</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'[Date] </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">),</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">ALLEXCEPT</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'[YearWeekNumber] </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f5f5f5;"><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#"><span style=" font-family:'Arial,sans-serif'; font-size:12px; font-weight:496; color:#333333; background-color:transparent; text-transform:uppercase;">КОПИРОВАТЬКОНВЕНЦИИ</span></a><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#code4"><span style=" font-family:'Consolas,Menlo,Monaco,monospace'; font-size:13px; font-weight:600; color:#c2c2c2; background-color:transparent; text-transform:uppercase;">#</span></a><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#code4"><span style=" font-family:'Consolas,Menlo,Monaco,monospace'; font-size:15px; font-weight:600; color:#c2c2c2; background-color:transparent; text-transform:uppercase;"> 4</span></a></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Результат, показанный на следующем снимке экрана, использует столбец «Неделя» в свойстве «Ось».</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">При отображении данных на уровне недели имеется 52 точки данных для каждого года. Предыдущая диаграмма содержит 156 точек данных, поэтому было бы полезно ограничить диапазон дат диаграммы. Однако если календарь не является недельным календарем, например стандартным ISO, тогда данные первой и последней недели выбранного периода времени могут быть неполными. В следующем разделе описывается, как управлять этим условием в стандартном календаре.</span></p>
<p style=" margin-top:60px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.2%;"><span style=" font-family:'effra,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:x-large; font-weight:696; color:#333333;">Скрытие неполных недель в визуализации</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Выбор даты может включать неполные периоды времени на линейном графике, что приводит к ухудшению визуализации. Например, на следующем снимке экрана мы выбрали продажи в период с февраля по июнь 2008 года. Первая и последняя недели в этом диапазоне являются неполными, показывая небольшое число по сравнению с остальной частью линейного графика – значение, похоже, ниже установленного минимального значения. по оси Y (1 000 000).</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Отображение данных в матричной визуализации дает более подробную информацию о том, что происходит.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Первая строка относится к неделе, заканчивающейся 2 февраля, поэтому сумма продаж включает продажи только за два дня (1 и 2 февраля), не учитывая продажи в любой из остальных пяти дней этой недели (с 27 по 31 января). То же самое с последней неделей, которая включает данные о продажах за 29 и 30 июня, но не включает продажи за оставшиеся пять дней этой недели (с 1 по 5 июля). Это также объясняет, почему в отчет включена неделя, заканчивающаяся в июле 2008 г., хотя срез «Месяц» включает только даты до июня 2008 г.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Мы можем создать меру, которая исключает из расчета неполные недели, как показано в следующем коде. Аналогичный метод можно использовать для неполных месяцев и кварталов.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:30px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333; background-color:#ffffff;"><br /></p>
<table border="0" style=" margin-top:15px; margin-bottom:30px; margin-left:0px; margin-right:0px;" cellspacing="0" cellpadding="0">
<tr>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="code5"></a><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">1</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">2</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">3</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">4</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">5</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">6</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">7</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">8</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">9</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">10</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">11</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">12</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">13</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">14</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">15</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">16</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">17</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">18</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">19</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">20</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">21</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">22</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">23</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">24</span></p></td>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">Sales Amount complete weeks </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstSelectedDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">= </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">CALCULATE</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">MIN</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'[Date] </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">),</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">ALLSELECTED</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">()</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">LastSelectedDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">= </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">CALCULATE</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">MAX</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'[Date] </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">),</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">ALLSELECTED</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">()</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstWeekDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">= </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">CALCULATE</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">MIN</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'[Week] </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">),</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">ALLSELECTED</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">()</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> - </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#ee7f18;">6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">LastWeekDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">= </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">CALCULATE</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">MAX</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'[Week] </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">),</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">ALLSELECTED</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">()</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">BeginFilterDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">IF</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">        </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstSelectedDate &gt; FirstWeekDate</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">        </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstWeekDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">+ </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#ee7f18;">7</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">        </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FirstSelectedDate </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">EndFilterDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">IF</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">        </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">LastSelectedDate &lt; LastWeekDate</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">        </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">LastWeekDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">- </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#ee7f18;">7</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">        </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">LastSelectedDate </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FilterDates </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">= </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">DATESBETWEEN</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> 'Date'[Date]</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">BeginFilterDate</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">EndFilterDate </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">VAR</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">Result </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">CALCULATE</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">        [Sales Amount]</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">        </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#035aca;">KEEPFILTERS</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">(</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">FilterDates </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;">    </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#808080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,monospace'; font-size:14px; font-weight:600; color:#035aca;">RETURN</span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#333333;"> </span><span style=" font-family:'Consolas,monospace'; font-size:14px; color:#000000;">Result</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f5f5f5;"><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#"><span style=" font-family:'Arial,sans-serif'; font-size:12px; font-weight:496; color:#333333; background-color:transparent; text-transform:uppercase;">КОПИРОВАТЬКОНВЕНЦИИ</span></a><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#code5"><span style=" font-family:'Consolas,Menlo,Monaco,monospace'; font-size:13px; font-weight:600; color:#c2c2c2; background-color:transparent; text-transform:uppercase;">№</span></a><a href="https://www.sqlbi.com/articles/improving-temporal-line-charts-in-power-bi-with-dax/#code5"><span style=" font-family:'Consolas,Menlo,Monaco,monospace'; font-size:15px; font-weight:600; color:#c2c2c2; background-color:transparent; text-transform:uppercase;"> 5</span></a></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Благодаря использованию новой меры визуализация линейного графика теперь удаляет первую и последнюю точки данных, показывая более обнадеживающие цифры.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Поведение показателя «Объем продаж за полные недели» становится более понятным при сравнении его с показателем «Объем продаж» в матричной визуализации.</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">Новая мера возвращает пустое значение для двух неполных недель. Более того, метод фильтрации, используемый в показателе «Объем продаж за полные недели», также работает на общем уровне; он включает только полные недели, не требуя дорогостоящих итераций в течение нескольких недель для получения правильного результата. Этот результат полезен для расчета среднего значения за неделю, которое в противном случае было бы испорчено наличием неполных недель, если бы использовалось обычное измерение объема продаж.</span></p>
<p style=" margin-top:60px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.2%;"><span style=" font-family:'effra,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:x-large; font-weight:696; color:#333333;">Заключение</span></p>
<p style=" margin-top:15px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'proxima-nova,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,sans-serif'; font-size:16px; color:#333333;">В этой статье описано несколько методов улучшения визуализации показателей на линейной диаграмме с использованием таблицы дат с различной степенью детализации по оси X. Эти методы можно адаптировать к любому нестандартному календарю. Важным выводом является то, что, используя DAX и внося небольшие изменения в модель данных, можно преодолеть определенные ограничения существующих визуализаций.</span></p></body></html>