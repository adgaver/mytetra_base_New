<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.3%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:xx-large; font-weight:600; color:#333333;">Нечеткое сравнение текстов на Python с FuzzyWuzzy</span></p>
<p style=" margin-top:0px; margin-bottom:7px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.7%;"><a href="https://tirinox.ru/fuzzywuzzy-python/"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; text-decoration: underline; color:#000000; background-color:transparent;">5 июня, 20205 июня, 2020</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Недавно мы обсуждали расчет </span><a href="https://tirinox.ru/levenstein-python/"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; text-decoration: underline; color:#de3912; background-color:transparent;">расстояния Левеншейна</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">, настало время испытать его применение на практике. Библиотека </span><a href="https://github.com/seatgeek/fuzzywuzzy"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; text-decoration: underline; color:#de3912; background-color:transparent;">FuzzyWuzzy</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;"> содержит набор функций для нечеткого поиска строк, дедупликации (удаления копий), корректировки ошибок. Она позволяет стать поиску умнее, помогая преодолеть влияние человеческого фактор.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Начнем с установки:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:12px; color:#000000;">pip install fuzzywuzzy python-Levenshtein</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Модуль </span><span style=" font-family:'Courier New'; font-size:16px; color:#2d2d2d; background-color:rgba(0,0,0,0.047059);">python-Levenshtein</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;"> можно устанавливать по желанию: работать будет и без него, но с ним гораздо быстрее (в разы). Поэтому советую его установить, он мелкий, порядка 50 Кб.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; color:#000000;">Похожесть двух строк</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; font-weight:600; color:#2d2d2d;">Задача:</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;"> есть две строки, требуется вычислить степень их похожести числом от 0 до 100. В </span><a href="https://github.com/seatgeek/fuzzywuzzy"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; text-decoration: underline; color:#de3912; background-color:transparent;">FuzzyWuzzy</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;"> для этого есть несколько функций, отличающихся подходом к сравнению и вниманием к деталям. Не забудем импортировать:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:12px; font-weight:696; color:#066da1;">from</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzzywuzzy </span><span style=" font-family:'inherit'; font-size:12px; font-weight:696; color:#066da1;">import</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Функция </span><span style=" font-family:'Courier New'; font-size:16px; color:#2d2d2d; background-color:rgba(0,0,0,0.047059);">fuzz.ratio</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;"> – простое посимвольное сравнение. Рейтинг 100 только если строки полностью равны, любое различие уменьшает рейтинг, будь то знаки препинания, регистр букв, порядок слов и так далее:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;Я люблю cпать!&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">81</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю есть&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">88</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Обратите внимание, что рейтинг второго примера ниже, чем у третьего, хотя по смыслу должно быть наоборот.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Следующая функция </span><span style=" font-family:'Courier New'; font-size:16px; color:#2d2d2d; background-color:rgba(0,0,0,0.047059);">fuzz.token_sort_ratio</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;"> решает эту проблему. Теперь акцент именно на сами слова, игнорируя регистр букв, порядок слов и даже знаки препинания по краям строки.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_sort_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю есть&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">56</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_sort_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;Я люблю спать!&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_sort_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;спать люблю я...&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_sort_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;Мал да удал&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;удал да МАЛ&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_sort_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;Мал да удал&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;Да Мал Удал&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Однако, смысл пословицы немного изменился, а рейтинг остался на уровне полного совпадения.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Функция </span><span style=" font-family:'Courier New'; font-size:16px; color:#2d2d2d; background-color:rgba(0,0,0,0.047059);">fuzz.token_set_ratio</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;"> пошла еще дальше: она игнорирует повторяющиеся слова, учитывает только уникальные.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_set_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;люблю я спать, спать, спать...&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_set_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;люблю я спать, спать и спать...&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_set_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;но надо работать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">28</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#888888;"># повторы в token_sort_ratio роняют рейтинг! </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_sort_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;люблю я спать, спать и спать.&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">65</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#888888;"># но вот это странно:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_set_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;люблю я спать, но надо работать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_set_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;люблю я спать, люблю я есть&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Последние два примера вернули 100, хотя добавлены новые слова, и это странно. Тут следует вспомнить о </span><span style=" font-family:'Courier New'; font-size:16px; color:#2d2d2d; background-color:rgba(0,0,0,0.047059);">fuzz.partial_ratio</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">, которая ведет себя также. А именно, проверяет вхождение одной строки в другую. Лишние слова игнорируются, главное – оценить, чтобы ядро было одно и тоже.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">partial_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;одно я знаю точно&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;одно я знаю&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">partial_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;одно я знаю точно&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;одно я знаю!&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">92</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">partial_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;одно я знаю точно&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я знаю&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Еще еще более навороченный метод </span><span style=" font-family:'Courier New'; font-size:16px; color:#2d2d2d; background-color:rgba(0,0,0,0.047059);">fuzz.WRatio</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">, который работает ближе к человеческой логике, комбинируя несколько методов в один алгоритм в определенными весами (отсюда и название WRatio = Weighted Ratio).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">WRatio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;люблю Я СПАТЬ!&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">95</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">WRatio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;люблю Я СПАТЬ и есть&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">86</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;&gt;&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">WRatio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;я люблю спать&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;!!СПАТЬ ЛЮБЛЮ Я!!&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">95</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; color:#000000;">Нечеткий поиск</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; font-weight:600; color:#2d2d2d;">Задача:</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;"> найти в списке строк одну или несколько наиболее похожих на поисковый запрос.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Импортируем подмодуль и применим </span><span style=" font-family:'Courier New'; font-size:16px; color:#2d2d2d; background-color:rgba(0,0,0,0.047059);">process.extract</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;"> или </span><span style=" font-family:'Courier New'; font-size:16px; color:#2d2d2d; background-color:rgba(0,0,0,0.047059);">process.extractOne</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:12px; font-weight:696; color:#066da1;">from</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzzywuzzy </span><span style=" font-family:'inherit'; font-size:12px; font-weight:696; color:#066da1;">import</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> process</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#000000;">strings = </span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">[</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'привет'</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'здравствуйте'</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'приветствую'</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'хай'</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'здорова'</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'ку-ку'</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#000000;">process.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">extract</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;Прив&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, strings, limit=</span><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">3</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#888888;"># [('привет', 90), ('приветствую', 90), ('здравствуйте', 45)]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#000000;">process.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">extractOne</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;Прив&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, strings</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#888888;"># ('привет', 90)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; color:#000000;">Удаление дубликатов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Очень полезная функция для обработки данных. Представьте, что вам досталась 1С база номенклатуры запчастей, там полный бардак, и вам нужно поудалять лишние повторяющиеся позиции товара, но где-то пробелы лишние, где-то буква перепутана и тому подобное. Тут пригодится </span><span style=" font-family:'Courier New'; font-size:16px; color:#2d2d2d; background-color:rgba(0,0,0,0.047059);">process.dedupe</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:16px; color:#2d2d2d; background-color:#eff0f1;">dedupe(contains_dupes, threshold=70, scorer=token_set_ratio)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:10px; color:#2d2d2d;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Первый аргумент – исходный список, второй – порог исключения (70 по умолчанию), третий – алгоритм сравнения (token_set_ratio по умолчанию).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">Пример:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:12px; color:#000000;">arr = </span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">[</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'Гайка на 4'</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'гайка 4 ГОСТ-1828 оцинкованная'</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'Болты на 10'</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'гайка 4 ГОСТ-1828 оцинкованная ...'</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'БОЛТ'</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#404247;">print</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">list</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">process.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">dedupe</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">arr</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#888888;"># ['гайка 4 ГОСТ-1828 оцинкованная ...', 'Болты на 10', 'БОЛТ']</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif'; font-size:16px; color:#2d2d2d;">FuzzyWuzzy можно применять совместно с Pandas. Например так (без особых подробностей):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:12px; font-weight:696; color:#066da1;">def</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> </span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">get_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">row</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f8f8f8;"><span style=" font-family:'inherit'; font-size:12px; color:#000000;">    name = row</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">[</span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">'Last/Business Name'</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#000000;">    </span><span style=" font-family:'inherit'; font-size:12px; font-weight:696; color:#066da1;">return</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> fuzz.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">token_sort_ratio</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">name, </span><span style=" font-family:'inherit'; font-size:12px; color:#2d47e6;">&quot;Alaska Sea Pilot PAC Fund&quot;</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:12px; color:#000000;">df</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">[</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">df.</span><span style=" font-family:'inherit'; font-size:12px; color:#404247;">apply</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">(</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;">get_ratio, axis=</span><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">1</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">)</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> </span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">&gt;</span><span style=" font-family:'inherit'; font-size:12px; color:#000000;"> </span><span style=" font-family:'inherit'; font-size:12px; color:#d53aa9;">70</span><span style=" font-family:'inherit'; font-size:12px; color:#444444;">]</span></p></body></html>