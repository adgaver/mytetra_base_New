<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="question-header"></a><a href="https://translated.turbopages.org/proxy_u/en-ru.ru.ea873c4b-651bc887-938d8d51-74722d776562/https/stackoverflow.com/questions/73234979/how-to-check-if-element-is-present-or-not-using-playwright-and-timeout-parameter"><span style=" text-decoration: underline; color:#0000ff;">К</span></a><a href="https://translated.turbopages.org/proxy_u/en-ru.ru.ea873c4b-651bc887-938d8d51-74722d776562/https/stackoverflow.com/questions/73234979/how-to-check-if-element-is-present-or-not-using-playwright-and-timeout-parameter"><span style=" text-decoration: underline; color:#0000ff;">ак проверить, присутствует элемент или нет, используя параметр Playwright и timeout</span></a></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629; vertical-align:top;">Мне нужно найти определенный элемент на моей веб-странице. Элемент может быть на странице или нет.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629; vertical-align:top;">Этот код выдает ошибку, если элемент не виден:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">error_text = self.page.wait_for_selector(</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">            self.ERROR_MESSAGE, timeout=</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">7000</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">).inner_text()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:10px; color:#232629; vertical-align:top;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629; vertical-align:top;">Как я могу найти элемент, используя timeout, и получить bool, сообщающий мне, найден элемент или нет?</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'inherit'; font-size:13px; color:#232629;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://translated.turbopages.org/proxy_u/en-ru.ru.ea873c4b-651bc887-938d8d51-74722d776562/https/stackoverflow.com/questions/tagged/python"><span style=" font-size:13px; text-decoration: underline; color:#0000ff;">python</span></a></li>
<li style=" font-family:'inherit'; font-size:13px; color:#232629;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://translated.turbopages.org/proxy_u/en-ru.ru.ea873c4b-651bc887-938d8d51-74722d776562/https/stackoverflow.com/questions/tagged/playwright"><span style=" font-size:13px; text-decoration: underline; color:#0000ff;">playwright</span></a></li>
<li style=" font-family:'inherit'; font-size:13px; color:#232629;" style=" margin-top:0px; margin-bottom:16px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://translated.turbopages.org/proxy_u/en-ru.ru.ea873c4b-651bc887-938d8d51-74722d776562/https/stackoverflow.com/questions/tagged/playwright-python"><span style=" font-size:13px; text-decoration: underline; color:#0000ff;">playwright-python</span></a></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">                          </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629;">Для этого нужно использовать </span><span style=" font-family:'Courier New'; font-size:13px; color:#000000;">page.is_visible(selector, **kwargs)</span><span style=" font-family:'inherit'; font-size:13px; color:#232629;">, поскольку это возвращает логическое значение. </span><a href="https://translated.turbopages.org/proxy_u/en-ru.ru.ea873c4b-651bc887-938d8d51-74722d776562/https/playwright.dev/python/docs/api/class-page#page-is-visible"><span style=" font-family:'inherit'; font-size:13px; text-decoration: underline; color:#0000ff;">Документы Playwright</span></a><span style=" font-family:'inherit'; font-size:13px; color:#232629;">,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">bool</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> = page.is_visible(selector, timeout=</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">7000</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">print</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">bool</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#OR</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; font-weight:600; color:#55aa00; background-color:#eff0f1;"># =============================================================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">if</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> page.is_visible(selector, timeout=</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">7000</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">print</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">&quot;Element Found&quot;</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">else</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">print</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">&quot;Element not Found&quot;</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; font-weight:600; color:#55aa00; background-color:#eff0f1;"># =============================================================</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:10px; color:#232629;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629;">Вы также можете использовать </span><span style=" font-family:'Courier New'; font-size:13px; color:#000000;">expect</span><span style=" font-family:'inherit'; font-size:13px; color:#232629;"> утверждение, если хотите напрямую подтвердить наличие элемента и провалить тесты, если условие не выполнено.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">expect(page.locator(</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">&quot;selector&quot;</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)).to_have_count(</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">1</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">, timeout=</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">7000</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:10px; color:#232629;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="answer-73266814"></a><span style=" font-family:'inherit'; font-size:13px; font-weight:600; color:#000000;">1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629;">Вы можете использовать </span><span style=" font-family:'Courier New'; font-size:13px; color:#000000;">page.wait_for_selector(selector, timeout)</span><span style=" font-family:'inherit'; font-size:13px; color:#232629;"> с блоком try except, чтобы проверить, присутствует веб-элемент или нет, если загрузка этого элемента занимает некоторое время.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">try</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    page.wait_for_selector(selector, timeout)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">print</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'element found'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">except</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">print</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'element not found'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:10px; color:#232629;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="answer-76150294"></a><span style=" font-family:'inherit'; font-size:13px; font-weight:600; color:#000000;">1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629;">Мне это не нравится, хотелось бы, чтобы было что-то удобное, но я использую вот так - показ кода Javascript</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">async</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> function isPresent(locator: Locator): Promise&lt;boolean&gt; {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;"> let isPresent = false;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;"> </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">try</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">   </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">await</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> locator.waitFor({ state: </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'attached'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">, timeout: </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">20</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> });</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">   isPresent = true;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;"> } catch(err) {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;"> </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">return</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> isPresent;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:10px; color:#232629;"><br /></p></body></html>