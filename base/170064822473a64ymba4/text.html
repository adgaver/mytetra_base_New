<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-weight:400; font-style:normal; "  bgcolor="#ffffff">
Version:0.9
StartHTML:0000000157
EndHTML:0000059021
StartFragment:0000000193
EndFragment:0000058985
SourceURL:https://tokmakov.msk.ru/articles/item/20
<html>
<body>
<!--StartFragment--><h1 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 25px; font-family: Arial, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;">Урок 6. Соответствие позиций</h1><div id="article-item" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(50, 50, 50); font-family: Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><div style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; overflow: hidden;"><p style="margin: 0px; padding: 0px; max-height: 1e+06px; font-size: 12px; color: rgb(150, 150, 150); width: 485px; float: left;">12.04.2018</p><p style="margin: 0px; padding: 0px; max-height: 1e+06px; font-size: 12px; color: rgb(150, 150, 150); width: 485px; float: right; text-align: right;">Категория:<span> </span><a href="https://tokmakov.msk.ru/articles/category/15" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); text-decoration: none; font-size: 12px;">Регулярные выражения</a></p></div><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Теперь вы знаете, как установить соответствие между всеми типами символов во всевозможных типах комбинаций и повторений в любом положении в тексте. Однако иногда необходимо установить соответствие в определенных местоположениях в пределах блока текста, для чего требуется установить соответствие позиций, — именно это объясняется в данном уроке.</p><h2 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 21px;">Использование границ</h2><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Соответствие позиций позволяет указать, где в строке текста должно произойти совпадение. Чтобы понять потребность в соответствии позиций, рассмотрим следующий пример:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The cat scattered his food all over the room.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">cat<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">cat</span> s<span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">cat</span>tered his food all over the room.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cat</code><span> </span>соответствует всем вхождениям<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cat</code>, даже вхождению<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cat</code><span> </span>в слово<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">scattered</code>. На самом деле иногда как раз это и нужно, но более чем вероятно, что требуется совсем другое. Если вы хотите в результате поиска заменить все вхождения слова<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cat</code><span> </span>на слово<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">dog</code>, то при таком поиске все закончилось бы следующей ерундой:</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The dog sdogtered his food all over the room.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Это заставляет нас учитывать границы и использовать специальные метасимволы для определения позиции (или границы) перед шаблоном и после него.</p><h2 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 21px;">Границы слова</h2><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Символ<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code><span> </span>указывает границу слова. Таким образом,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code><span> </span>соответствует началу или концу слова.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы продемонстрировать использование<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code>, рассмотрим предыдущий пример снова, на сей раз с указанием границ:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The cat scattered his food all over the room.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">\bcat\b<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">cat</span> scattered his food all over the room.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Перед словом<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cat</code><span> </span>и после него есть пробел, и слово вместе с пробелами соответствует шаблону<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\bcat\b</code><span> </span>(пробел — один из символов, которые обычно отделяют слова). Вхождение слова<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cat</code><span> </span>в scattered, однако, не соответствует этому шаблону, потому что этому слову в<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">scattered</code><span> </span>предшествует символ<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">s</code>, а после него идет символ<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">t</code><span> </span>(ни один из которых не соответствует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code>).</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;"><p style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px;">Так чему же именно соответствует<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code>? Механизмы регулярных выражений не понимают английский или любой другой язык, и потому они не могут определить границы слова. Символ<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code><span> </span>просто соответствует позиции между символом, который является обычно частью слова (слова состоят из алфавитно-цифровых символов и символа подчеркивания, т.е. представляют собой текст, который состоит из символов, соответствующих<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\w</code>) и чем-нибудь, что не может быть частью слова (текст, который состоит из символов, соответствующих<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\W</code>).</p></div><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Важно помнить, что для того, чтобы найти слово целиком,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code><span> </span>должен использоваться и перед, и после текста, с которым будет установлено соответствие. Рассмотрим следующий пример:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The captain wore his cap and cape proudly as he sat </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">listening to the recap of how his crew saved the men  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">from a capsized vessel.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">\bcap<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">cap</span>tain wore his <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">cap</span> and <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">cap</span>e proudly as he sat </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">listening to the recap of how his crew saved the men  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">from a <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">cap</span>sized vessel.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\bcap</code><span> </span>соответствует любому слову, которое начинается с<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cap</code>, и потому были найдены четыре слова, причем три из них не являются словом<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cap</code>.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Далее приведен тот же самый пример, но только<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code><span> </span>стоит в конце слова:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The  captain wore his cap and cape proudly as he sat </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">listening to the recap of how his crew saved the men  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">from a capsized vessel.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">cap\b<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The  captain wore his <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">cap</span> and cape proudly as he sat </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">listening to the re<span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">cap</span> of how his crew saved the men  </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">from a capsized vessel.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">сар\b</code><span> </span>соответствует любому слову, которое заканчивается на<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cap</code>, и потому были найдены два совпадения, включая и то слово, которое не является словом<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cap</code>.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Но если нужно найти только слово<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">cap</code>, правильным шаблоном является только<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\bcap\b</code>.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;"><p style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px;">На самом деле символ<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code><span> </span>не соответствует какому-либо символу; он соответствует позиции. Поэтому длина строки, которая находится шаблоном<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\bcat\b</code>, равна трем (<code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">с</code>,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">а</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">t</code>), а не пяти символам.</p></div><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы указать нечто, не соответствующее границе слова, используйте<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\B</code>. В следующем примере метасимволы<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\B</code><span> </span>помогают определить местонахождение дефисов с лишними пробелами вокруг них:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Please enter the nine-digit id as it appears on your </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">color - coded pass-key.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">\B-\B<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Please enter the nine-digit id as it appears on your </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">color <span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">-</span> coded pass-key.<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;"><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\B-\B</code><span> </span>соответствует дефису, который окружен символами границы слова. Дефисы в<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">nine-digit</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">pass-key</code><span> </span>не соответствуют шаблону, но дефис в<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">color - coded</code><span> </span>будет найден.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Как указывалось в уроке 4, «Использование метасимволов», метасимволы на верхнем регистре обычно отрицают функциональные возможности их эквивалентов на нижнем регистре.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;"><p style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px;">В некоторых реализациях регулярных выражений поддерживается два дополнительных метасимвола. Метасимвол<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code><span> </span>соответствует началу или концу слова, дополнительный метасимвол<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\&lt;<span> </span></code>соответствует только началу слова, а дополнительный метасимвол<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\&gt;</code><span> </span>соответствует только концу слова. Хотя использование этих символов обеспечивает дополнительное управление, поддержка их очень ограничена.</p></div><h2 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 21px;">Определение границ строк</h2><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Границы слов позволяют указать местонахождение совпадений относительно позиции в слове (начало слова, конец слова, полностью слово и т.д.). Границы строк выполняют подобную функцию, но используются для нахождения соответствий с шаблонами в начале или конце всей строки. Метасимволы для границ строк — крыша<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>(начало строки) и доллар<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">$</code><span> </span>(конец строки).</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;"><p style="margin: 1px 0px 9px; padding: 0px; max-height: 1e+06px;">В уроке 3, «Соответствие набору символов», вы узнали, что крыша<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>используется для того, чтобы отрицать набор. Как же она может использоваться также и для указания начала строки?</p><p style="margin: 9px 0px 0px; padding: 0px; max-height: 1e+06px;">Метасимвол<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>имеет несколько значений. Этот метасимвол отрицает набор, только если находится в наборе (т.е. заключен в квадратные скобки<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">]</code>) и является первым символом после открывающей<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">[</code>. Вне набора и в начале шаблона<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>соответствует началу строки.</p></div><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Чтобы продемонстрировать использование границ строк, рассмотрим следующий пример. Правильные (допустимые) XML-документы начинаются с<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;?xml&gt;</code><span> </span>и, вероятно, имеют дополнительные атрибуты (например, номер версии, как в<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;?xml version="1.0" ?&gt;</code>). Ниже мы просто проверяем, является ли текст XML-документом:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;wsdl:definitions targetNamespace="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:impl="http://tips.cf" xmlns:intf="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:apachesoap="http://xml.apache.org/xml-soap" … &gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;\?xml.*\?&gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;wsdl:definitions targetNamespace="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:impl="http://tips.cf" xmlns:intf="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:apachesoap="http://xml.apache.org/xml-soap" … &gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Шаблон, казалось, сработал.<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;\?xml</code><span> </span>соответствует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;?xml</code>,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.*</code><span> </span>соответствует любому другому тексту (нуль или больше экземпляров<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.</code>), а<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\?&gt;</code><span> </span>соответствует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">?&gt;</code><span> </span>в конце тега.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Но это очень грубая проверка. Рассмотрим следующий пример: тот же шаблон используется для того, чтобы найти текст, которому предшествует лишний текст перед открытием XML.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">This is bad, real bad!</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;wsdl:definitions  targetNamespace="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:impl="http://tips.cf" xmlns:intf="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:apachesoap="http://xml.apache.org/xml-soap" … &gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;\?xml.*\?&gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">This is bad, real bad!</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;wsdl:definitions  targetNamespace="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:impl="http://tips.cf" xmlns:intf="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:apachesoap="http://xml.apache.org/xml-soap" … &gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;\?xml.*\?&gt;</code><span> </span>соответствует второй строке текста. И хотя тег, открывающий XML, действительно может быть помещен во второй строке текста, этот пример определенно недопустим (и обработка такого текста как XML-документа может вызвать всевозможные проблемы).</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Необходимо проверить, что открывающий XML-тег на самом деле является первым текстом в строке, и именно это должен сделать метасимвол<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code>:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;wsdl:definitions  targetNamespace="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:impl="http://tips.cf" xmlns:intf="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:apachesoap="http://xml.apache.org/xml-soap" … &gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">^\s&lt;\?xml.*\?&gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span> </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;wsdl:definitions  targetNamespace="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:impl="http://tips.cf" xmlns:intf="http://tips.cf" </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">xmlns:apachesoap="http://xml.apache.org/xml-soap" … &gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Первый символ<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>соответствует началу строки, поэтому<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^\s*</code><span> </span>соответствует началу строки, после которого следует нуль или большее количество пробельных символов (таким образом обрабатываются допустимые пробелы, позиции табуляции и концы строк перед открытием XML-документа). Следовательно, весь шаблон<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^\s&lt;\?xml.*\?&gt;</code><span> </span>соответствует открывающему XML-тегу с любыми атрибутами, причем он правильно обрабатывает таклсе и пробельные символы.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;"><p style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px;">Шаблон<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^\s*&lt;\?xml.*\?&gt;</code><span> </span>сработал правильно, но только потому, что XML-документ, приведенный в этом примере, не завершен. Если бы использовался весь XML-документ, вы бы увидели пример работы жадного квантора. Это, вероятно, был бы самый убедительный пример того, когда нужно использовать<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.*?</code><span> </span>вместо просто<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">.*</code>.</p></div><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Знак<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">$</code><span> </span>используется во многом аналогичным способом. Этот знак помогает проверить, что после закрывающего тега<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">&lt;/html&gt;</code><span> </span>на Web-странице ничего нет:</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;/[Hh][Tt][Mm][Ll]&gt;\s*$<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Наборы используются для каждого из символов<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">H</code>,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">T</code>,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">M</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">L</code><span> </span>(чтобы обработать любую комбинацию символов верхнего и нижнего регистров), a<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\s*$</code><span> </span>соответствуют любому пробельному символу, за которым следует конец строки.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;"><p style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px;">Шаблон<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^.*$</code><span> </span>— синтаксически правильное регулярное выражение, которое почти всегда будет находить соответствие, и потому оно совершенно бесполезно. Попробуйте догадаться, чему соответствует данное выражение и когда оно не будет находить соответствие.</p></div><h3 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 17px;">Использование многострочного режима</h3><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Обычно<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>соответствует началу строки, а<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">$</code><span> </span>— концу строки. Однако есть исключение, а точнее, способ изменить такое поведение этих символов.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Во многих реализациях регулярных выражений имеются специальные метасимволы, которые изменяют поведение других метасимволов; один из них —<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">(?m)</code>. Этот метасимвол допускает использование многострочного режима. Многострочный режим вынуждает механизм регулярных выражений обрабатывать конец строки как разделитель строк, и в этом режиме<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>соответствует началу строки или началу после конца строки (т.е. началу новой строки), а<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">$</code><span> </span>соответствует концу строки или концу после конца строки.</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Метасимвол<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">(?m)</code><span> </span>(если он, конечно, применяется) должен быть помещен в самое начало шаблона, как показано в следующем примере, в котором регулярное выражение помогает определить местонахождение всех комментариев в блоке кода, написанном на JavaScript:</p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Текст</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;SCRIPT&gt;</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">function doSpellCheck(fora, field) {</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  // Make sure not empty</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  if (field.value == '') { </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    return false;</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  }</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  // Init</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  var windowName='spellWindow';</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  var spellCheckURL='spell.cfm?formname=comment&amp;fieldname='+field.name;</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  ..........</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  // Done </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  return false; </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">}</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;/SCRIPT&gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярное выражение</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 128, 128);">(?m)</span>^\s*//.*$<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Результат</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;SCRIPT&gt;</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">function doSpellCheck(fora, field) {</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">  // Make sure not empty</span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  if (field.value == '') { </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    return false;</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  }</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">  // Init</span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  var windowName='spellWindow';</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  var spellCheckURL='spell.cfm?formname=comment&amp;fieldname='+field.name;</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  ..........</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style="margin: 0px; padding: 0px; max-height: 1e+06px; border: 1px solid rgb(255, 0, 0);">  // Done</span></p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  return false; </p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">}</p><p style=" font-family:'Consolas'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&lt;/SCRIPT&gt;<span class="copy" style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(150, 150, 150); font-size: 8px; background: rgb(255, 255, 255); border: 0.5px solid rgb(209, 209, 209); border-radius: 5px; position: absolute; z-index: 1000; right: 1px; top: 1px; cursor: pointer; width: 60px; text-align: center;">Копировать</span></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Выражение<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^\s*//.*$</code><span> </span>соответствует началу строки, за которым следует любой пробельный символ, за ним в свою очередь следует<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">//</code><span> </span>(начало комментария в JavaScript), за которым размещается любой текст, после чего следует конец строки. Однако использованный нами шаблон соответствовал бы только первому комментарию (и то только если бы это был единственный текст на странице). Модификатор<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">(?m)</code><span> </span>в<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">(?m)^\s*//.*$</code><span> </span>заставляет шаблон обрабатывать концы строк как разделители строк, и потому были найдены все комментарии.</p><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;"><p style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px;">Выражение<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">(?m)</code><span> </span>не поддерживается многими реализациями регулярных выражений.</p></div><div class="note" style="margin: 25px 0px; padding: 17px 10px 10px; max-height: 1e+06px; font-size: 13px; color: rgb(100, 100, 100); border: 0.5px solid rgb(209, 209, 209); background: rgb(245, 245, 245); position: relative;"><p style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px;">В некоторых реализациях регулярных выражений также поддерживается метасимвол<span> </span><code style="margin: 1px 0px 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\A</code>, соответствующий началу строки, и метасимвол<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\Z</code>, соответствующий концу строки. Если эти метасимволы поддерживаются, то ведут себя они очень похоже на<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">$</code>, но в отличие от<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">$</code>, они не модифицируются метасимволом<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">(?m)</code><span> </span>и поэтому не будут работать в многострочном режиме.</p></div><h2 style="margin: 15px 0px; padding: 0px; max-height: 1e+06px; color: rgb(83, 144, 204); font-weight: normal; font-size: 21px;">Резюме</h2><p style="margin: 15px 0px; padding: 0px; max-height: 1e+06px;">Регулярные выражения могут соответствовать любым блокам текста или тексту в определенной позиции в строке. Символ<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\b</code><span> </span>соответствует границе слова (а<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">\B</code><span> </span>— его противоположность — все делает полностью наоборот). Метасимволы<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">$</code><span> </span>отмечают границы строк (начало строки и конец строки, соответственно), хотя когда используется модификатор<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">(?m)</code>,<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">^</code><span> </span>и<span> </span><code style="margin: 0px; padding: 0px; max-height: 1e+06px; color: rgb(0, 0, 187);">$</code><span> </span>будут также соответствовать строкам, которые начинаются или заканчиваются в конце строки (т.е. там, где стоит символ разрыва строки).</p></div><!--EndFragment-->
</body>
</html></body></html>