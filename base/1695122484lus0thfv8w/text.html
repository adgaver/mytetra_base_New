<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:5px; margin-left:0px; margin-right:56px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Lucida Grande,Arial,Lucida Sans Unicode,sans-serif'; font-size:8.25pt; font-weight:600; color:#333333;">Передача параметров в скрипт Python из командной строки.</span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">При запуске скриптов, часто требуется указать какие-то дополнительные параметры, которые будут использованы в ходе работы программы. Конечно, можно при помощи функции </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">input()</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;"> получить данные от пользователя и сохранить их в переменных. Как говорится, дело вкуса. Но вместо множественного вызова функции </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">input()</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;"> есть намного более элегантное решение. Это передача параметров в скрипт </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">python</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">, непосредственно в командной строке — в момент вызова программы. Как это сделать? Давайте разберемся.</span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">Для начала, наберите небольшую программу в своем редакторе. Сохраните её в папке </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">C:\PyScript</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;"> под именем</span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;"> input_var.py.</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;"> Разумеется, папку и файл можете назвать как угодно, но тогда не забудьте указать свои данные при вызове скрипта в командной строке.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eeeeee;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666; background-color:#eeeeee;">1. #-*- coding: UTF-8 -*-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eeeeee;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666; background-color:#eeeeee;">2. </span><span style=" font-family:'inherit'; font-size:8.25pt; color:#ff6600;">from</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;"> sys </span><span style=" font-family:'inherit'; font-size:8.25pt; color:#ff6600;">import</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;"> argv</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eeeeee;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">3.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eeeeee;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">4. script, first, second, third = argv</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eeeeee;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">5.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eeeeee;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">6. print (</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#008000;">&quot;Этот скрипт называется: &quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">, script)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eeeeee;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">7. print (</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#008000;">&quot;Значение первой переменной: &quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">, first)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eeeeee;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">8. print (</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#008000;">&quot;Значение второй переменной: &quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">, second)</span></p>
<p style=" margin-top:0px; margin-bottom:21px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eeeeee;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">9. print (</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#008000;">&quot;Значение третьей переменной: &quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#666666;">, third)</span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">Как видите, программа очень маленькая. Но её вполне хватит для демонстрации способа передачи данных в скрипт. После того, как следуя приведенным выше инструкциям, вы набрали и сохранили программу, вызовите командную строку Windows. После этого укажите имя интерпретатора </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">python</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">, путь к вызываемому файлу и три значения, разделяя все пробелами, как на рисунке ниже:</span></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:5px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:6px; margin-bottom:6px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><a name="caption-attachment-2734"></a><span style=" font-family:'Georgia,Times New Roman,Times,serif'; font-size:8.25pt; font-style:italic; color:#777777;">Р</span><span style=" font-family:'Georgia,Times New Roman,Times,serif'; font-size:8.25pt; font-style:italic; color:#777777;">ис. 1 Передача данных в скрипт Python</span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;"> </span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">Если у вас скрипт хранится в другой папке — укажите свой путь к нему. После этого нажмите клавишу Enter на клавиатуре. В результате вы должны увидеть следующее:</span></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:5px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:6px; margin-bottom:6px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><a name="caption-attachment-2735"></a><span style=" font-family:'Georgia,Times New Roman,Times,serif'; font-size:8.25pt; font-style:italic; color:#777777;">Р</span><span style=" font-family:'Georgia,Times New Roman,Times,serif'; font-size:8.25pt; font-style:italic; color:#777777;">ис. 2 Результат выполнения программы</span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">А теперь давайте разберем, как же это все работает.</span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">Во второй строке мы импортируем </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">argv</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;"> из модуля </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">sys</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">. Во многих языках переменных </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">argv</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;"> — стандартное имя. В этой переменной хранятся данных, которые вы передаете сценарию. Пока нам достаточно знать, что эта переменная работает как «контейнер», в котором мы можем передать данные скрипту.</span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">В четвертой строке мы производим «распаковку» содержимого </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">argv</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;"> в переменные. Слово «распаковка» может показаться странным, но в данном случае оно наиболее подходит. Фактически, мы сообщаем интерпретатору </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">Python</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">, что он должен взять данные из </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">argv</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;"> и последовательно поместить их в переменные, которые мы указали с левой стороны. После этого мы можем работать с ними как с обычными переменными, которым присвоили значения.</span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">Вы можете указать свои значения вместо «15 два 105», но число значений, которые вы передаете скрипту, должно строго соответствовать количеству переменных, в которые «распаковывается» содержимое argv. Иначе вы увидите сообщение об ошибке:</span></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:5px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:6px; margin-bottom:6px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><a name="caption-attachment-2736"></a><span style=" font-family:'Georgia,Times New Roman,Times,serif'; font-size:8.25pt; font-style:italic; color:#777777;">Р</span><span style=" font-family:'Georgia,Times New Roman,Times,serif'; font-size:8.25pt; font-style:italic; color:#777777;">ис. 3 Ошибка распаковки данных.</span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">Это сообщение возникло потому что мы передали в скрипт Python недостаточно данных. Если конкретнее, то строка </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">ValueError</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;"> прямо сообщает, что необходимо 4 значения, но указано 3 (имя скрипта передается автоматически).</span></p>
<p style=" margin-top:0px; margin-bottom:24px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">Не забывайте, что все данные, которые мы передаем в программу python являются строковыми значениями. Поэтому параметры «10» и «105» сначала необходимо преобразовать в числовой тип при помощи функции </span><span style=" font-family:'inherit'; font-size:8.25pt; font-style:italic; color:#666666;">int()</span><span style=" font-family:'inherit'; font-size:8.25pt; color:#666666;">, а только потом использовать в математических операциях. Будьте внимательны!</span></p></body></html>