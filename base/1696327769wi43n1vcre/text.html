<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:400; font-style:normal;">
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.3%; font-family:'inherit'; font-size:xx-large; font-weight:600; color:#232629; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.3%; background-color:#ffffff;"><a name="question-header"></a><a href="https://ru.stackoverflow.com/questions/1441660/%d0%9a%d0%b0%d0%ba-%d0%bf%d0%b5%d1%87%d0%b0%d1%82%d0%b0%d1%82%d1%8c-timedelta-%d0%b1%d0%b5%d0%b7-%d0%b4%d0%be%d0%bb%d0%b5%d0%b9-%d1%81%d0%b5%d0%ba%d1%83%d0%bd%d0%b4"><span style=" font-family:'inherit'; font-size:xx-large; font-weight:600; text-decoration: underline; color:#0000ff;">К</span></a><span style=" font-family:'inherit'; font-size:xx-large; font-weight:600; text-decoration: underline; color:#0000ff;">ак печатать timedelta без долей секунд</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; text-decoration: underline; color:#0000ff;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; text-decoration: underline; color:#0000ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mainbar"></a><span style=" font-family:'inherit'; font-size:13px; font-weight:600; color:#000000;">0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">import</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;"> pandas </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">as</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;"> pd</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">from</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;"> datetime </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">import</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;"> datetime </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">as</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;"> dt</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">doc = pd.read_csv(</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'document.csv'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">, sep=</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">';'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">, encoding=</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'cp1251'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">service_type = doc[</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'Услуга'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">]</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">for</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;"> i </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">in</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;"> service_type.unique():</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">    fltr = doc.loc[service_type == i]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">    fltr[</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'Время выполнения'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">] = pd.to_timedelta(fltr[</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'Время выполнения'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">])</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">    summ = fltr[</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'Время выполнения'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">].</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">sum</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">    </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">if</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;"> </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">len</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">(fltr[</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'Время выполнения'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">]) &gt; </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">0</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">        final = summ/</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">len</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">(fltr[</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'Время выполнения'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">])</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">        </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">print</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">(i+</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">&quot;:&quot;</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">, </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'\n'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">, final)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:10px; color:#232629; vertical-align:top;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629; vertical-align:top;">на выходе имеем числа формата</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">days 04:</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">49</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">:</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">51.200000</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">0</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;"> days </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">11</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">:04:</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">20.833333333</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">0</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;"> days </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">00</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">:</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">36</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629; vertical-align:top;">:</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">24</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;">и т.д.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1; vertical-align:top;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:10px; color:#232629; vertical-align:top;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629; vertical-align:top;">Как можно избавиться от чисел после точки?</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'inherit'; font-size:13px; color:#232629;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://ru.stackoverflow.com/questions/tagged/python"><span style=" font-size:13px; text-decoration: underline; color:#0000ff;">python</span></a></li>
<li style=" font-family:'inherit'; font-size:13px; color:#232629;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://ru.stackoverflow.com/questions/tagged/pandas"><span style=" font-size:13px; text-decoration: underline; color:#0000ff;">pandas</span></a></li>
<li style=" font-family:'inherit'; font-size:13px; color:#232629;" style=" margin-top:0px; margin-bottom:16px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://ru.stackoverflow.com/questions/tagged/timedelta"><span style=" font-size:13px; text-decoration: underline; color:#0000ff;">timedelta</span></a></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">                          </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="answer-1441837"></a><span style=" font-family:'inherit'; font-size:13px; font-weight:600; color:#000000;">2</span></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#000000;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629;">у pandas.timedelta есть </span><a href="https://pandas.pydata.org/docs/reference/api/pandas.Timedelta.round.html#pandas.Timedelta.round"><span style=" font-family:'inherit'; font-size:13px; text-decoration: underline; color:#0000ff;">метод</span></a><span style=" font-family:'inherit'; font-size:13px; color:#232629;"> round, а то, что делает ваш код, можно сделать с помощью группировки без цикла, примерно так:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">doc[</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'Время выполнения'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">] = pd.to_timedelta(doc[</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'Время выполнения'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">])</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">res = doc.groupby(</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'Услуга'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)[</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'Время выполнения'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">].mean().</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">round</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'s'</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">).reset_index()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;"># получите дата фрейм такого вида</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">print</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(res)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">'''</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">  Услуга Время выполнения</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">0      a  0 days 12:50:12</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">1      b  0 days 15:20:12</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">2      c  0 days 17:50:06</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Consolas'; font-size:13px; color:#232629;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:10px; color:#232629;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="answer-1441821"></a><span style=" font-family:'inherit'; font-size:13px; font-weight:600; color:#000000;">1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-weight:600; color:#55aa00; background-color:#eff0f1;"># =============================================================</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629;">Первый вариант - создаете новый объект </span><span style=" font-family:'Courier New'; font-size:13px; color:#000000;">timedelta</span><span style=" font-family:'inherit'; font-size:13px; color:#232629;">, в котором количество секунд округляете до целого:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">from</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> datetime </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">import</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> timedelta</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">td = timedelta(seconds=</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">123456.789</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">print</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(td)  </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;"># 1 day, 10:17:36.789000</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">td2 = timedelta(seconds=</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">int</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(td.total_seconds()))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">print</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(td2)  </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;"># 1 day, 10:17:36</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#000000; background-color:#eff0f1;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:10px; color:#232629;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-weight:600; color:#55aa00; background-color:#eff0f1;"># =============================================================</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'inherit'; font-size:13px; color:#232629;">Другой вариант - в </span><a href="https://github.com/python/cpython/blob/129998bd7b133defa37c7529bfad9052c0022b5c/Lib/datetime.py#L573"><span style=" font-family:'inherit'; font-size:13px; text-decoration: underline; color:#0000ff;">исходниках класса </span></a><a href="https://github.com/python/cpython/blob/129998bd7b133defa37c7529bfad9052c0022b5c/Lib/datetime.py#L573"><span style=" font-family:'Courier New'; font-size:13px; text-decoration: underline; color:#000000;">timedelta</span></a><span style=" font-family:'inherit'; font-size:13px; color:#232629;"> смотрите </span><a href="https://github.com/python/cpython/blob/129998bd7b133defa37c7529bfad9052c0022b5c/Lib/datetime.py#L707"><span style=" font-family:'inherit'; font-size:13px; text-decoration: underline; color:#0000ff;">метод </span></a><a href="https://github.com/python/cpython/blob/129998bd7b133defa37c7529bfad9052c0022b5c/Lib/datetime.py#L707"><span style=" font-family:'Courier New'; font-size:13px; text-decoration: underline; color:#000000;">__str__</span></a><span style=" font-family:'inherit'; font-size:13px; color:#232629;">, создаете на его основе свою функцию форматирования:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;"># def __str__(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#     mm, ss = divmod(self._seconds, 60)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#     hh, mm = divmod(mm, 60)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#     s = &quot;%d:%02d:%02d&quot; % (hh, mm, ss)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#     if self._days:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#         def plural(n):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#             return n, abs(n) != 1 and &quot;s&quot; or &quot;&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#         s = (&quot;%d day%s, &quot; % plural(self._days)) + s</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#     if self._microseconds:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#         s = s + &quot;.%06d&quot; % self._microseconds</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">#     return s</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">def</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">format_timedelta</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(</span><span style=" font-family:'inherit'; font-size:13px; color:#232629;">td: timedelta</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    mm, ss = </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">divmod</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(td.seconds, </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">60</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    hh, mm = </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">divmod</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(mm, </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">60</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    s = </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">&quot;%d:%02d:%02d&quot;</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> % (hh, mm, ss)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">if</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> td.days:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">        </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">def</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">plural</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(</span><span style=" font-family:'inherit'; font-size:13px; color:#232629;">n</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">            </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">return</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> n, </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">abs</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(n) != </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">1</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">and</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">&quot;s&quot;</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">or</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">&quot;&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">        s = (</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">&quot;%d day%s, &quot;</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> % plural(td.days)) + s</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;"># убираем отображение микросекунд</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'Consolas'; font-size:13px; color:#232629; background-color:#eff0f1;">    </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">return</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;"> s</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:13px; color:#232629; background-color:#eff0f1;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#eff0f1;"><span style=" font-family:'inherit'; font-size:13px; color:#000000;">print</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">(format_timedelta(timedelta(seconds=</span><span style=" font-family:'inherit'; font-size:13px; color:#000000;">123456.789</span><span style=" font-family:'Consolas'; font-size:13px; color:#232629;">))) </span><span style=" font-family:'inherit'; font-size:13px; color:#000000;"># 1 day, 10:17:36</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'inherit'; font-size:10px; color:#232629;"><br /></p></body></html>